import{dk as ft,r as s,dm as Is,cF as Bt,cm as es,cp as Ue,cI as $s,cJ as Bs,bk as Fs,j as e,co as ze,a7 as N,o as re,T as p,t as f,bc as _t,bB as ve,al as Ot,aU as Hs,dp as Et,dq as kt,G as Ls,bx as ts,be as Se,B as g,k as J,h as je,ac as me,dr as ss,x as de,g as R,cU as Mt,H as as,d as he,b as Ws,bo as ns,cL as rs,M as Re,L as os,c8 as rt,e as Ds,d7 as Us,dn as is,d8 as zs,d9 as Xs,da as Gs,db as Ks,cA as Ft,ag as De,ah as ot,ds as Ys,bd as oe,dt as Qs,du as qs,dv as Js,X as St,dw as Zs,dx as ea,v as Xe,a as ls,_ as Te,bi as te,aZ as Q,$ as cs,u as it,aX as us,aY as ds,b0 as ms,b1 as nt,a1 as Pe,dy as ta,dz as sa,dA as aa,dB as na,dC as ra,dD as oa,ce as ia,ak as bt,I as at,K as la,cy as ca,br as ua,w as da,s as wt,bt as ma,U as pa,Z as ha,a4 as xa,dE as ga,z as Ht,bV as fa,ae as Sa,dF as Lt,bw as Wt}from"./assets/index-BDcs8OaA.js";import{C as ps}from"./9dmfkY9x.js";import{P as ba}from"./gLsK49VX.js";import{u as Ge}from"./tX9VNdav.js";import{l as wa,u as ya}from"./kn1s7jTN.js";import{I as hs}from"./nlzjmGkJ.js";import{A as Dt,u as va}from"./u_4jEEiW.js";import{u as ja,c as Ut,v as zt,a as Ta,p as Ca,r as ka,g as Aa,b as Na,d as yt,e as Ee,f as vt,o as _a,h as Oa,i as Ea,j as Pt,S as xs,k as Ma,l as Pa,m as Ra,n as Va,A as Ia}from"./tzIo__Ux.js";import{u as $a}from"./VlgDKYov.js";import{u as jt}from"./scdy8p9M.js";import{u as Ba}from"./u5k4-5Yk.js";import{C as Fa}from"./y5ax0GID.js";import{C as Xt,g as Ha}from"./8xtoGUcB.js";import{C as La}from"./PY5NJQUD.js";import{a as Gt}from"./xirfvWJJ.js";import{c as Wa}from"./0YkWVzPW.js";import{G as Da}from"./CFwsQoKA.js";import{V as Ua}from"./bwNrJKc_.js";import{S as za}from"./x-sCoUT-.js";import"./lTzDYV02.js";import"./0Xwqv7fW.js";import"./aF5kppaH.js";import"./8bNoHJzy.js";import"./6QZjTHo4.js";import"./uJJRkjMC.js";import"./FUKZW4Fx.js";import"./ZLekcFwQ.js";import"./4bNlJGqv.js";import"./dPAOcghz.js";import"./-RWyXF4h.js";import"./xrvJovm6.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="2ad8bcbd-176d-4743-b625-f39e6b1b6739",t._sentryDebugIdIdentifier="sentry-dbid-2ad8bcbd-176d-4743-b625-f39e6b1b6739")}catch{}})();function Xa(t){const{min:a=0,max:r=100,onChange:n,value:o,defaultValue:i,isReversed:l,direction:m="ltr",orientation:d="horizontal",id:x,isDisabled:h,isReadOnly:S,onChangeStart:j,onChangeEnd:b,step:u=1,getAriaValueText:c,"aria-valuetext":T,"aria-label":y,"aria-labelledby":v,name:C,focusThumbOnChange:M=!0,minStepsBetweenThumbs:$=0,...k}=t,V=ft(j),P=ft(b),F=ft(c),U=Oa({isReversed:l,direction:m,orientation:d}),[B,I]=ja({value:o,defaultValue:i??[25,75],onChange:n});if(!Array.isArray(B))throw new TypeError(`[range-slider] You passed an invalid value for \`value\` or \`defaultValue\`, expected \`Array\` but got \`${typeof B}\``);const[W,H]=s.useState(!1),[z,L]=s.useState(!1),[_,ie]=s.useState(-1),X=!(h||S),Ve=s.useRef(B),K=B.map(w=>Ut(w,a,r)),Ke=$*u,Z=Ga(K,a,r,Ke),q=s.useRef({eventSource:null,value:[],valueBounds:[]});q.current.value=K,q.current.valueBounds=Z;const Ce=K.map(w=>r-w+a),$e=(U?Ce:K).map(w=>zt(w,a,r)),ke=d==="vertical",Be=s.useRef(null),Ae=s.useRef(null),xe=Ta({getNodes(){const w=Ae.current,A=w?.querySelectorAll("[role=slider]");return A?Array.from(A):[]}}),Ye=s.useId(),Y=Ea(x??Ye),Qe=s.useCallback(w=>{var A,E;if(!Be.current)return;q.current.eventSource="pointer";const O=Be.current.getBoundingClientRect(),{clientX:G,clientY:ue}=(E=(A=w.touches)==null?void 0:A[0])!=null?E:w,ce=ke?O.bottom-ue:G-O.left,pe=ke?O.height:O.width;let Le=ce/pe;return U&&(Le=1-Le),Ca(Le,a,r)},[ke,U,r,a]),Fe=(r-a)/10,Ne=u||(r-a)/100,ee=s.useMemo(()=>({setValueAtIndex(w,A){if(!X)return;const E=q.current.valueBounds[w];A=parseFloat(ka(A,E.min,Ne)),A=Ut(A,E.min,E.max);const O=[...q.current.value];O[w]=A,I(O)},setActiveIndex:ie,stepUp(w,A=Ne){const E=q.current.value[w],O=U?E-A:E+A;ee.setValueAtIndex(w,O)},stepDown(w,A=Ne){const E=q.current.value[w],O=U?E+A:E-A;ee.setValueAtIndex(w,O)},reset(){I(Ve.current)}}),[Ne,U,I,X]),ge=s.useCallback(w=>{const A=w.key,O={ArrowRight:()=>ee.stepUp(_),ArrowUp:()=>ee.stepUp(_),ArrowLeft:()=>ee.stepDown(_),ArrowDown:()=>ee.stepDown(_),PageUp:()=>ee.stepUp(_,Fe),PageDown:()=>ee.stepDown(_,Fe),Home:()=>{const{min:G}=Z[_];ee.setValueAtIndex(_,G)},End:()=>{const{max:G}=Z[_];ee.setValueAtIndex(_,G)}}[A];O&&(w.preventDefault(),w.stopPropagation(),O(w),q.current.eventSource="keyboard")},[ee,_,Fe,Z]),{getThumbStyle:qe,rootStyle:be,trackStyle:ae,innerTrackStyle:we}=s.useMemo(()=>Aa({isReversed:U,orientation:d,thumbRects:xe,thumbPercents:$e}),[U,d,$e,xe]),le=s.useCallback(w=>{var A;const E=w??_;if(E!==-1&&M){const O=Y.getThumb(E),G=(A=Ae.current)==null?void 0:A.ownerDocument.getElementById(O);G&&setTimeout(()=>G.focus())}},[M,_,Y]);Is(()=>{q.current.eventSource==="keyboard"&&P?.(q.current.value)},[K,P]);const dt=w=>{const A=Qe(w)||0,E=q.current.value.map(pe=>Math.abs(pe-A)),O=Math.min(...E);let G=E.indexOf(O);const ue=E.filter(pe=>pe===O);ue.length>1&&A>q.current.value[G]&&(G=G+ue.length-1),ie(G),ee.setValueAtIndex(G,A),le(G)},mt=w=>{if(_==-1)return;const A=Qe(w)||0;ie(_),ee.setValueAtIndex(_,A),le(_)};Na(Ae,{onPanSessionStart(w){X&&(H(!0),dt(w),V?.(q.current.value))},onPanSessionEnd(){X&&(H(!1),P?.(q.current.value))},onPan(w){X&&mt(w)}});const He=s.useCallback((w={},A=null)=>({...w,...k,id:Y.root,ref:Bt(A,Ae),tabIndex:-1,"aria-disabled":yt(h),"data-focused":Ee(z),style:{...w.style,...be}}),[k,h,z,be,Y]),pt=s.useCallback((w={},A=null)=>({...w,ref:Bt(A,Be),id:Y.track,"data-disabled":Ee(h),style:{...w.style,...ae}}),[h,ae,Y]),ht=s.useCallback((w={},A=null)=>({...w,ref:A,id:Y.innerTrack,style:{...w.style,...we}}),[we,Y]),fe=s.useCallback((w,A=null)=>{var E;const{index:O,...G}=w,ue=K[O];if(ue==null)throw new TypeError(`[range-slider > thumb] Cannot find value at index \`${O}\`. The \`value\` or \`defaultValue\` length is : ${K.length}`);const ce=Z[O];return{...G,ref:A,role:"slider",tabIndex:X?0:void 0,id:Y.getThumb(O),"data-active":Ee(W&&_===O),"aria-valuetext":(E=F?.(ue))!=null?E:T?.[O],"aria-valuemin":ce.min,"aria-valuemax":ce.max,"aria-valuenow":ue,"aria-orientation":d,"aria-disabled":yt(h),"aria-readonly":yt(S),"aria-label":y?.[O],"aria-labelledby":y?.[O]?void 0:v?.[O],style:{...w.style,...qe(O)},onKeyDown:vt(w.onKeyDown,ge),onFocus:vt(w.onFocus,()=>{L(!0),ie(O)}),onBlur:vt(w.onBlur,()=>{L(!1),ie(-1)})}},[Y,K,Z,X,W,_,F,T,d,h,S,y,v,qe,ge,L]),Je=s.useCallback((w={},A=null)=>({...w,ref:A,id:Y.output,htmlFor:K.map((E,O)=>Y.getThumb(O)).join(" "),"aria-live":"off"}),[Y,K]),Ze=s.useCallback((w,A=null)=>{const{value:E,...O}=w,G=!(E<a||E>r),ue=E>=K[0]&&E<=K[K.length-1];let ce=zt(E,a,r);ce=U?100-ce:ce;const pe={position:"absolute",pointerEvents:"none",..._a({orientation:d,vertical:{bottom:`${ce}%`},horizontal:{left:`${ce}%`}})};return{...O,ref:A,id:Y.getMarker(w.value),role:"presentation","aria-hidden":!0,"data-disabled":Ee(h),"data-invalid":Ee(!G),"data-highlighted":Ee(ue),style:{...w.style,...pe}}},[h,U,r,a,d,K,Y]),ye=s.useCallback((w,A=null)=>{const{index:E,...O}=w;return{...O,ref:A,id:Y.getInput(E),type:"hidden",value:K[E],name:Array.isArray(C)?C[E]:`${C}-${E}`}},[C,K,Y]);return{state:{value:K,isFocused:z,isDragging:W,getThumbPercent:w=>$e[w],getThumbMinValue:w=>Z[w].min,getThumbMaxValue:w=>Z[w].max},actions:ee,getRootProps:He,getTrackProps:pt,getInnerTrackProps:ht,getThumbProps:fe,getMarkerProps:Ze,getInputProps:ye,getOutputProps:Je}}function Ga(t,a,r,n){return t.map((o,i)=>{const l=i===0?a:t[i-1]+n,m=i===t.length-1?r:t[i+1]-n;return{min:l,max:m}})}var[Ka,lt]=es({name:"SliderContext",errorMessage:"useSliderContext: `context` is undefined. Seems you forgot to wrap all slider components within <RangeSlider />"}),[Ya,ct]=es({name:"RangeSliderStylesContext",errorMessage:`useRangeSliderStyles returned is 'undefined'. Seems you forgot to wrap the components in "<RangeSlider />" `}),gs=Ue(function(a,r){const n={orientation:"horizontal",...a},o=$s("Slider",n),i=Bs(n),{direction:l}=Fs();i.direction=l;const{getRootProps:m,...d}=Xa(i),x=s.useMemo(()=>({...d,name:n.name}),[d,n.name]);return e.jsx(Ka,{value:x,children:e.jsx(Ya,{value:o,children:e.jsx(ze.div,{...m({},r),className:"chakra-slider",__css:o.container,children:n.children})})})});gs.displayName="RangeSlider";var At=Ue(function(a,r){const{getThumbProps:n,getInputProps:o,name:i}=lt(),l=ct(),m=n(a,r);return e.jsxs(ze.div,{...m,className:Pt("chakra-slider__thumb",a.className),__css:l.thumb,children:[m.children,i&&e.jsx("input",{...o({index:a.index})})]})});At.displayName="RangeSliderThumb";var fs=Ue(function(a,r){const{getTrackProps:n}=lt(),o=ct(),i=n(a,r);return e.jsx(ze.div,{...i,className:Pt("chakra-slider__track",a.className),__css:o.track,"data-testid":"chakra-range-slider-track"})});fs.displayName="RangeSliderTrack";var Ss=Ue(function(a,r){const{getInnerTrackProps:n}=lt(),o=ct(),i=n(a,r);return e.jsx(ze.div,{...i,className:"chakra-slider__filled-track",__css:o.filledTrack})});Ss.displayName="RangeSliderFilledTrack";var Qa=Ue(function(a,r){const{getMarkerProps:n}=lt(),o=ct(),i=n(a,r);return e.jsx(ze.div,{...i,className:Pt("chakra-slider__marker",a.className),__css:o.mark})});Qa.displayName="RangeSliderMark";const bs=({chain:t})=>e.jsxs(N,{align:"center",direction:"column",gap:4,h:"full",justify:"center",w:"full",children:[e.jsx(re,{color:"primary",name:"chart",size:48}),e.jsx(p,{textAlign:"center",children:f("views.swap.gasHistoryNotSupported",{chain:t})})]}),qa=({title:t,isOpened:a,setIsOpened:r,historyData:n,unitName:o,chain:i,hoveredIndex:l,setHoveredIndex:m,isLoading:d,gasState:x,resetChartValue:h})=>{const S=()=>{r(!1)};return e.jsx(_t,{isOpened:a,onClose:S,title:t||"",children:d?e.jsx(N,{align:"center",minH:"230px",children:e.jsx(re,{spin:!0,name:"loader",size:24})}):n?e.jsxs(ve,{w:"full",children:[e.jsxs(ve,{pb:2,pl:3,children:[e.jsx(p,{children:f("components.gasHistory.chartTitle",{chain:i})}),e.jsxs(N,{children:[e.jsx(p,{fontSize:"11px",children:f("views.swap.currentGasRate")})," ",e.jsx(p,{color:`brand.${x?.color}`,fontSize:"11px",children:`${x?.state} (${n.values[n.values.length-1]} ${o})`})]})]}),e.jsxs(N,{bg:"borderPrimary",borderRadius:"md",direction:"column",pt:2,px:1,w:"full",children:[e.jsxs(N,{direction:"column",ml:3,children:[e.jsxs(N,{children:[e.jsx(p,{color:"brand.navy",children:l&&n.values[l]})," ",e.jsx(p,{children:o})]}),e.jsx(p,{children:l&&n.labels[l]})]}),e.jsx(ve,{ml:"-13px",onMouseLeave:h,width:"calc(100% + 26px)",children:e.jsx(ps,{hideAxisLines:!0,hideLabel:!0,hideTooltip:!0,hoveredIndex:l,labels:n?.labels,onHover:m,values:n?.values})})]})]}):e.jsx(N,{align:"center",minH:"230px",children:e.jsx(bs,{chain:i})})})},Ja=({sx:t,historyData:a,unitName:r,chain:n,hoveredIndex:o,setHoveredIndex:i,isLoading:l,gasState:m,resetChartValue:d})=>e.jsx(N,{_dark:{bgColor:"bgSecondary",border:"none"},align:"center",bgColor:"white",border:"1px solid",borderColor:"borderPrimary",borderRadius:24,boxShadow:"md",boxSizing:"border-box",direction:"column",justify:a?"start":"center",maxWidth:"480px",minH:"500px",mt:{base:0,lg:"64px"},mx:"auto",p:4,sx:t,top:0,transition:Ot,width:{lg:"280px"},children:l?e.jsx(re,{spin:!0,name:"loader",size:24}):a?e.jsxs(ve,{w:"full",children:[e.jsxs(ve,{pb:2,pl:2,children:[e.jsx(p,{children:f("components.gasHistory.chartTitle",{chain:n})}),e.jsxs(N,{children:[e.jsx(p,{fontSize:"11px",children:f("views.swap.currentGasRate")})," ",e.jsx(p,{color:`brand.${m?.color}`,fontSize:"11px",children:`${m?.state} (${a.values[a.values.length-1]} ${r})`})]})]}),e.jsxs(N,{bg:"borderPrimary",borderRadius:"xl",direction:"column",pt:2,w:"full",children:[e.jsxs(N,{direction:"column",display:"flex",ml:3,children:[e.jsxs(N,{children:[e.jsx(p,{color:"brand.navy",children:o&&a.values[o]})," ",e.jsx(p,{children:r})]}),e.jsx(p,{color:"textSecondary",fontWeight:"normal",textStyle:"captiongit",children:o&&a.labels[o]})]}),e.jsx(ve,{ml:"-9px",onMouseLeave:d,width:"calc(100% + 18px)",children:e.jsx(ps,{hideAxisLines:!0,hideLabel:!0,hideTooltip:!0,hoveredIndex:o,labels:a?.labels,onHover:i,values:a?.values})})]})]}):e.jsx(bs,{chain:n})}),Za=t=>t?t.reduce((r,n)=>r+n,0)/t.length:void 0,Nt=(t,a)=>{const r=a||Za(t);if(!r||!t)return;const n=t[t?.length-1];return n<r*.85?{color:"green",state:f("views.swap.low")}:n>r*1.15?{color:"red",state:f("views.swap.high")}:{color:"yellow",state:f("views.swap.average")}},en=({analyticsVisible:t,toggleAnalytics:a,inputAssetChain:r})=>{const{isLgActive:n}=Hs(),{data:o,isLoading:i}=Et(),l=s.useMemo(()=>{if(o)return o.find(b=>b&&b.chainId===kt[r])},[o,r]),m=s.useMemo(()=>{if(!l)return;const b=l?.history.map(y=>y.value)??[],u=l?.history.map(y=>Ls(y.timestamp).format("DD MMM YYYY, HH:mm"))??[],c=b.reduce((y,v,C)=>(v===null&&y.push(C),y),[]),T=u.filter((y,v)=>!c.includes(v));return{values:b.filter(Boolean),labels:T,average24h:l.average24h,average7d:l.average7d}},[l]),[d,x]=s.useState(m?.values.length);s.useEffect(()=>{m?.values&&x(m?.values.length-1)},[m]);const h=ts(r),S=Nt(m?.values,m?.average7d||m?.average24h),j=()=>{m&&setTimeout(()=>{x(m?.values.length-1)},100)};return n?e.jsx(ve,{position:{base:"static",xl:"absolute"},right:2,transform:{base:`translateY(${t?"0%":"100%"})`,lg:`translateX(${t?"0%":"100%"})`},transition:Ot,children:t&&e.jsx(Ja,{chain:h,gasState:S,historyData:m,hoveredIndex:d,isLoading:i,resetChartValue:j,setHoveredIndex:x,unitName:l?.unitName})}):e.jsx(qa,{chain:h,gasState:S,historyData:m,hoveredIndex:d,isLoading:i,isOpened:t,resetChartValue:j,setHoveredIndex:x,setIsOpened:a,title:"Analysis",unitName:l?.unitName})},ws=t=>s.useMemo(()=>{const r={outOfPocketFee:0,firstNetworkFee:0,affiliateFee:0,networkFee:0,totalFee:0},n=Object.values(t||{}).flat();if(n.length===0)return r;const{outOfPocketFee:o,networkFee:i,affiliateFee:l}=n.reduce((m,{affiliateFeeUSD:d,networkFeeUSD:x,isOutOfPocket:h})=>(m.affiliateFee+=d,m.networkFee+=x,m.outOfPocketFee+=h?x:0,m),r);return{firstNetworkFee:n?.[0]?.networkFeeUSD||0,affiliateFee:l,networkFee:i,outOfPocketFee:o,totalFee:l+i}},[t]),ys=s.memo(({fees:t,size:a="md"})=>{const{outOfPocketFee:r}=ws(t),n=s.useMemo(()=>a==="md"?14:10,[a]);return r?e.jsx(Se,{children:e.jsxs(g,{center:!0,children:[e.jsx(p,{textStyle:"caption-xs",variant:"secondaryBtn",children:`$${new J({value:r,decimal:2}).toFixed(2)}`}),e.jsx(re,{className:"pl-0.5",color:"secondaryBtn",name:"gas",size:n})]})}):null}),Rt={THUNDERCHAIN:"THUNDERChain",ONEINCH:"1inch",UNISWAP:"UniswapV1",UNISWAP_V1:"UniswapV1",UNISWAPV2:"UniswapV2",Uniswap_V2:"UniswapV2",KYBERSWAP:"KyberSwap",KYBERSWAPV2:"KyberSwapV2",KYBERSWAP_V2:"KyberSwapV2",TRADERJOE:"TraderJoe",PLATYPUS:"Platypus",BALANCERV2:"Balancer",UNISWAPV3:"UniswapV3",Uniswap_V3:"UniswapV3",ZEROX:"0x",CURVEV2:"CurveV2",Curve_V2:"CurveV2",CURVE:"Curve",SUSHISWAP:"SushiSwap",SUSHI:"SushiSwap",SYNTHETIXATOMIC:"Syntetix",SYNTHETIX_ATOMIC_SIP288:"Syntetix",KYBERSWAPELASTIC:"KyberSwap",SYNAPSE:"Synapse",AVALANCHE_TRADERJOE_V2:"TraderJoe","WOOFI-AVAX":"WOOFI"},vs=s.memo(({className:t,size:a=24,providers:r})=>{const n=s.useMemo(()=>r.map(o=>o.split("-")[0]),[r]);return e.jsx(N,{className:"px-1 max-w-[100px]",flex:1,flexDirection:"row-reverse",justify:"between",children:n.map((o,i)=>{const l=Rt[o]||o,m=i===0;return e.jsx(g,{className:je(t,{"z-10":m,"-z-0 -ml-2":!m}),children:e.jsx(Se,{content:l,children:e.jsx(me,{logoURI:ss(o),size:a})})},o)})})}),tn=s.memo(({providerLogoURL:t,provider:a,percentage:r})=>e.jsxs(g,{align:"end",className:"w-full gap-2 p-1.5",children:[t&&e.jsx(me,{logoURI:t,size:24}),e.jsxs(p,{className:"text-[11px]",textStyle:"caption",children:[Rt[a.replace("_","")]||a,` - ${r}%`]})]})),sn=s.memo(({fromAsset:t,toAsset:a,swapParts:r})=>e.jsxs(g,{col:!0,className:"w-full",children:[e.jsxs(g,{center:!0,row:!0,className:"gap-2 py-2",children:[e.jsx(me,{logoURI:t.logoURL,size:24}),e.jsx(p,{className:"text-[18px]",children:"→"}),e.jsx(me,{logoURI:a.logoURL,size:24})]}),e.jsx(g,{col:!0,className:"border border-solid rounded-xl border-light-border-primary dark:border-dark-border-primary",children:r.map(n=>e.jsx(tn,{...n},`${n.provider}-${n.percentage}`))})]})),Kt=({address:t,identifier:a})=>({identifier:a,logoURL:Mt({address:t,identifier:a})}),an=s.memo(({isOpened:t,onClose:a,swaps:r})=>{const n=s.useMemo(()=>Object.entries(r).reduce((o,[i,l])=>{const m=ts(i,!0),d=de.fromChainOrSignature(i==="THUNDERCHAIN"?R.THUNDERChain:i),x=l.map(h=>h.map(({from:S,to:j,parts:b,fromTokenAddress:u,toTokenAddress:c})=>({fromAsset:Kt({address:u,identifier:S}),toAsset:Kt({address:c,identifier:j}),swapParts:b.concat().sort((T,y)=>y.percentage-T.percentage).map(({percentage:T,provider:y})=>({percentage:T,providerLogoURL:y?ss(y):"",provider:Rt[y]||y}))})));return o.push({name:m,chainSwaps:x,logoURL:Mt({identifier:`${d.chain}.${d.ticker}`})}),o},[]),[r]);return e.jsx(_t,{isOpened:t,onClose:a,title:f("common.swapPath"),children:e.jsx(g,{className:"gap-x-4 max-h-[80vh] max-w-[80vw]",children:n.map(({name:o,logoURL:i,chainSwaps:l},m)=>e.jsx("div",{children:e.jsxs(g,{center:!0,children:[e.jsxs(g,{col:!0,children:[e.jsxs(g,{alignCenter:!0,className:"gap-2 pb-2",children:[i&&e.jsx(me,{logoURI:i,size:28}),e.jsx(p,{textStyle:"subtitle2",children:o})]}),e.jsx(g,{alignCenter:!0,col:!0,flex:1,children:l.map(d=>e.jsx(g,{alignCenter:!0,row:!0,className:"gap-6",children:d.map((x,h)=>e.jsxs(s.Fragment,{children:[e.jsx(sn,{...x}),h!==d.length-1&&e.jsx(p,{className:"text-[24px]",children:"→"})]},`${x.fromAsset.identifier}-${x.toAsset.identifier}`))},`${d[0].fromAsset.identifier}-${d[0].toAsset.identifier}`))})]}),m!==n.length-1&&e.jsx(p,{className:"text-[34px]",children:"→"})]})},o))})})}),nn=s.memo(({expectedOutput:t,streamingSwap:a,swaps:r,outputAssetDecimal:n,unitPrice:o,optimal:i,path:l,providers:m,isApproved:d,assetTicker:x,fees:h,streamSwap:S})=>{const[j,b]=s.useState(!1),u=Ge(),c=s.useMemo(()=>parseFloat(S&&a?.expectedOutput||t),[t,S,a?.expectedOutput]),T=s.useMemo(()=>u(new J({value:c,decimal:n})),[u,n,c]),y=s.useMemo(()=>u(o*c),[c,u,o]),v=s.useCallback(M=>{M.stopPropagation(),b(!0)},[]),C=s.useMemo(()=>{const M=l.split(" -> ")?.map(P=>P.split("-")?.[0]),[$,k,...V]=M;return V.length>1?`${$} → ${k} ... ${V[V.length-1]}`:M.join(" → ")},[l]);return e.jsxs(g,{col:!0,className:"relative",flex:1,children:[e.jsx(g,{center:!0,className:je("opacity-0 absolute rounded-sm px-4 transition-all bg-btn-secondary-translucent group-hover:bg-transparent w-fit -right-7",{"!opacity-100":i}),children:e.jsx(p,{textStyle:"caption-xs",children:f("common.optimal")})}),e.jsxs(g,{col:!0,className:"pl-4 py-1",children:[e.jsxs(g,{justify:"between",children:[e.jsxs(g,{className:"pt-3",children:[e.jsx(vs,{className:"pb-3",providers:m,size:30}),d&&e.jsx(as,{iconName:"approved",size:22})]}),e.jsxs(g,{col:!0,className:"pr-2",justify:"end",children:[e.jsxs(g,{className:"gap-x-1",justify:"end",children:[e.jsx(p,{children:new J(T).toSignificant(6)}),e.jsx(p,{children:x})]}),e.jsxs(g,{alignCenter:!0,className:"gap-x-1",children:[e.jsx(ys,{fees:h}),e.jsx(p,{variant:"secondary",children:y})]})]})]}),e.jsx(g,{children:e.jsx(he,{className:"h-6 px-3 w-fit",onClick:v,tooltip:f("views.swap.swapPath"),variant:"tint",children:e.jsxs(p,{textStyle:"caption-xs",variant:"secondary",children:[f("common.path"),": ",C]})})})]}),e.jsx(an,{isOpened:j,onClose:()=>b(!1),swaps:r})]})}),rn=s.memo(({expectedOutput:t,streamingSwap:a,onClick:r,isApproved:n,outputAsset:o,unitPrice:i,path:l,providers:m,selected:d,fees:x,streamSwap:h})=>{const S=Ge(),[,j]=o.symbol.split("-"),b=s.useMemo(()=>parseFloat(h&&a?.expectedOutput||t),[t,h,a?.expectedOutput]),u=s.useMemo(()=>new J({value:b,decimal:o.decimal}),[b,o.decimal]),c=Mt({address:j,identifier:`${o.chain}.${o.ticker}`}),T=s.useMemo(()=>{const v=l.split(" -> ")?.map(C=>C.split("-")?.[0]);return`${v[0]} → ${v[v.length-1]}`},[l]),y=s.useMemo(()=>S(i*b),[b,S,i]);return e.jsxs(Ws,{className:"!px-3 !py-1.5 !gap-0",isFocused:d,onClick:r,children:[e.jsxs(g,{justify:"between",children:[e.jsxs(g,{alignCenter:!0,className:"py-2",children:[e.jsx(vs,{providers:m}),n&&e.jsx(as,{iconName:"approved",size:18,tooltip:f("views.swap.routeContractApproved")})]}),e.jsx(g,{align:"end",justify:"between",children:e.jsx(g,{center:!0,className:"gap-x-1.5",children:e.jsxs(g,{col:!0,children:[e.jsxs(g,{className:"gap-x-1",justify:"end",children:[e.jsx(p,{fontWeight:"bold",children:u.toSignificant(6)}),e.jsx(p,{children:o.ticker}),e.jsx(me,{asset:o,hasChainIcon:!1,logoURI:c,size:18})]}),e.jsxs(g,{alignCenter:!0,className:"gap-x-1",justify:"end",children:[e.jsx(ys,{fees:x,size:"sm"}),e.jsx(p,{className:"text-right",variant:"secondary",children:y})]})]})})})]}),e.jsx(g,{className:"px-1 pt-0.5",children:e.jsx(p,{className:"!text-[9px]",textStyle:"caption-xs",variant:"secondary",children:T})})]})}),on=s.memo(({setSwapRoute:t,selectedRoute:a,outputUnitPrice:r,outputAsset:n,routes:o,streamSwap:i})=>e.jsx(g,{className:"self-stretch transition-max-height duration-300",children:a&&e.jsx(ns,{className:"flex-1 self-stretch !bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl flex-col overflow-hidden",shadow:!1,title:e.jsx(nn,{...a,assetTicker:n.ticker,outputAssetDecimal:n.decimal||8,streamSwap:i,unitPrice:r}),titleClassName:"!pl-0 pr-1 !pt-0",children:e.jsx(g,{col:!0,className:"gap-1 pt-2",children:o.map(l=>s.createElement(rn,{...l,key:`${l.path}-${l.providers.join(",")}`,onClick:()=>t(l),outputAsset:n,selected:l===a,streamSwap:i,unitPrice:r}))})})})),ln=s.memo(({totalFee:t,fees:a,isOpened:r,onClose:n})=>{const o=Ge(2,""),i=s.useMemo(()=>{if(!a)return[];const{affiliateFee:l,...m}=Object.entries(a).reduce((x,h)=>{const[S,j]=h;return j&&(j?.forEach(b=>x.affiliateFee+=b.affiliateFeeUSD),x[S]=j),x},{affiliateFee:0});return[...Object.entries(m).reduce((x,[h,S])=>S?[...S.map(({type:b,networkFee:u,networkFeeUSD:c,asset:T})=>{const y=de.fromChainOrSignature(h),v=de.fromStringSync(T);return{label:e.jsxs(g,{center:!0,className:"gap-x-1",children:[e.jsxs(p,{textStyle:"caption",children:[`${f("common.network")} `,b?f(`common.${b}`):""]}),e.jsx(me,{asset:y,size:20})]}),value:e.jsxs(g,{center:!0,className:"gap-x-1",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx(p,{textStyle:"caption-xs",variant:"secondary",children:"("}),e.jsx(me,{asset:v,size:14}),e.jsxs(p,{textStyle:"caption-xs",variant:"secondary",children:[o(u),")"]})]}),e.jsx(p,{children:o(c)})]})}}),...x]:x,[]),{label:e.jsxs(g,{center:!0,className:"gap-x-1",children:[e.jsx(p,{textStyle:"caption",children:f("views.swap.exchangeFee")}),e.jsx(me,{asset:de.fromChainOrSignature("ETH.THUNDER"),hasChainIcon:!1,size:20})]}),value:l>0?o(l):e.jsx(p,{variant:"green",children:"FREE"})},{label:e.jsx(g,{center:!0,children:e.jsx(p,{textStyle:"caption",children:f("views.wallet.totalFee")})}),value:e.jsx(p,{children:t})}]},[a,o,t]);return s.useEffect(()=>{!a&&r&&n()},[a,r,n]),a?e.jsx(_t,{isOpened:r,onClose:n,title:f("views.swap.feeExplanation"),children:e.jsx(g,{className:"w-80",flex:1,children:e.jsx(hs,{items:i})})}):null}),cn=({routes:t})=>{const a=rs(),r=s.useMemo(()=>a.pathname.split("/").includes("kyber"),[a.pathname]),n=s.useMemo(()=>t.filter(o=>o.providers.filter(i=>i!=="KYBER"&&i!=="THUNDERCHAIN").length===0),[t]);return{isKyberSwapPage:r,kyberRoutes:n}},un=({selectedRoute:t,noPriceProtection:a,inputAmount:r,outputAsset:n,setManualSlippage:o})=>{const i=s.useMemo(()=>t?.calldata?.memo?t.calldata.memo.split(":").length>=8:!1,[t?.calldata?.memo]),[l,m]=s.useState(!1),[d,x]=s.useState(null),h=t?.streamingSwap?.maxQuantity&&t?.streamingSwap?.maxIntervalForMaxQuantity,[S,j]=s.useState(0),b=s.useMemo(()=>!a&&!!t?.calldata?.memoStreamingSwap,[a,t?.calldata?.memoStreamingSwap]),u=s.useCallback(k=>m(k&&!!b),[b]);s.useEffect(()=>{i&&S!==t?.meta.slippagePercentage&&o?.(S)},[i,t?.meta.slippagePercentage,o,S]),s.useEffect(()=>{u(!!t?.path),x(null)},[h,b,t?.path,u]);const c=s.useMemo(()=>{const k=dn(t?.calldata?.memoStreamingSwap,3);return k&&Number(k.split("/")[1])||3},[t?.calldata?.memoStreamingSwap]),T=s.useMemo(()=>{const k=new J({value:t?.streamingSwap?.expectedOutput||0,decimal:n.decimal});if(!d)return k;if(d.subswaps===0||!l)return new J({value:0,decimal:n.decimal});const V=t?.streamingSwap?.maxQuantity?d.subswaps/t?.streamingSwap?.maxQuantity:1,P=new J({value:t?.streamingSwap?.savingsInAsset||0,decimal:n.decimal}),F=P.mul(V),U=P.sub(F);return k.sub(U)},[n.decimal,t?.streamingSwap?.expectedOutput,t?.streamingSwap?.maxQuantity,t?.streamingSwap?.savingsInAsset,l,d]),y=s.useMemo(()=>{const k=new J({value:t?.expectedOutput||0,decimal:n.decimal});return!t||r.getValue("number")===0?new J({value:0,decimal:n.decimal}):l&&T.gt(0)?T:k},[t,n.decimal,r,l,T]);s.useEffect(()=>{if(i)return j(t?.meta.slippagePercentage||0);if(!t){j(0);return}const k=new J({value:l?t.streamingSwap?.expectedOutput||0:t.expectedOutput,decimal:n.decimal});if(k.lte(0))return;const V=l?t?.streamingSwap?.expectedOutputMaxSlippage:t?.expectedOutputMaxSlippage,P=new J({value:V||0,decimal:n.decimal}).div(k).toFixed(2),F=100-Number(P)*100;j(F)},[n.decimal,t?.path,l]);const v=s.useMemo(()=>{const k=Number(t?.streamingSwap?.savingsInUSD||0);if(!d)return k;if(d.subswaps===0||!l)return 0;const V=t?.streamingSwap?.maxQuantity?d.subswaps/t?.streamingSwap?.maxQuantity:1;return k*V},[t?.streamingSwap?.maxQuantity,t?.streamingSwap?.savingsInUSD,l,d]),C=s.useMemo(()=>y.mul(1-S/100),[y,S]),M=s.useMemo(()=>l&&t?.streamingSwap?.fees?t?.fees?{...t.fees,...t.streamingSwap.fees}:t.streamingSwap.fees:t?.fees,[t?.fees,t?.streamingSwap?.fees,l]);s.useEffect(()=>{d&&u(!!d.subswaps)},[l,d,u]);const $=s.useMemo(()=>{if(!t||i)return t;const k=S?J.shiftDecimals({value:C,from:n.decimal||Re.THUNDER,to:Re.THUNDER}).getValue("bigint").toString():"0",V=Yt(t.calldata.memoStreamingSwap,{minAmount:k,interval:d?.interval,subswaps:d?.subswaps}),P=Yt(t.calldata.memo,{minAmount:k}),F=l?{...t.calldata,memoStreamingSwap:V}:{...t.calldata,memo:P};return{...t,calldata:F}},[t,i,S,C,n.decimal,d?.interval,d?.subswaps,l]);return{streamSwap:l,toggleStreamSwap:u,canStreamSwap:b,minReceive:C,outputAmount:y,fees:M,streamingSwapParams:d,setStreamingSwapParams:x,route:$,hasStreamingSettings:h,savingsInUSD:v,slippagePercent:S,setSlippagePercent:j,defaultInterval:c}};function Yt(t,{minAmount:a,interval:r,subswaps:n}){const o=t?.split(":"),i=3;if(!o||o?.length<i+1)return t;const l=o[i].includes("/"),m=o[i];if(l){const d=a||m.split("/")[0],x=r||m.split("/")[1],h=n||m.split("/")[2];o[i]=`${d||"0"}/${x||"0"}/${h||"0"}`}else o[i]=a||"0";return o.join(":")}function dn(t,a){return!t||!a?null:t.split(":")[a]}const mn=({inputAsset:t})=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{textStyle:"caption",variant:"yellow",children:["Are you looking for native token ",e.jsx(os,{className:"text-twitter-blue",to:rt(t,Ds),children:"$THUNDER?"})]}),e.jsx(p,{textStyle:"caption-xs",children:" "}),e.jsx(p,{textStyle:"caption",variant:"yellow",children:"You have selected $THUNDER token ticker on Ethereum chain. THUNDER token on Ethereum chain is a deprecated token. Please make sure you are swapping the correct token."})]}),pn=24*60*60*1e3,hn=({streamingSwapParams:t,route:a,streamSwap:r,useMaxTime:n})=>{const o=s.useMemo(()=>{if(!a)return null;const{timeEstimates:i}=a;if(!i)return null;const{inboundMs:l,swapMs:m,outboundMs:d,streamingMs:x}=i,h=t?t.interval*t.subswaps*6e3:x,S=l+m+d,j=m+l+Math.max(h,d);return r?j:S},[t,a,r]);return n?pn:o},Tt=4,xn=5,We=15,Me=10,Qt=.5,gn=({route:t,outputAsset:a,outputAmount:r,slippagePercent:n,setSlippagePercent:o})=>{const[i,l]=s.useState(0),[m,d]=s.useState(!1),[x,h]=s.useState(!1),S=t?.meta.recommendedSlippage,j=s.useMemo(()=>{const c=new J({value:t?.streamingSwap?.expectedOutput||0,decimal:a.decimal});if(c.lte(0))return 100;const T=r.div(c),y=We+Me*Tt,v=T.getValue("number")*100,C=100-Number(v),M=fn(y,C);return v<100?M:100},[r,a.decimal,t?.streamingSwap?.expectedOutput]);s.useEffect(()=>{const c=We+(Me-n)*Tt;l(n>0?c:0)},[n]);const b=n>0?"brand.btnPrimary":"brand.orange",u=c=>{if(c[0]<We/2){o(0);return}const T=Me-(c[0]-We)/Tt;if(T<=Qt){o(Qt);return}if(T>=Me){o(Me);return}o(Math.min(T,Me))};return e.jsxs(N,{animateOpacity:!0,in:!0,as:Us,w:"100%",children:[e.jsxs(N,{children:[e.jsx(p,{color:"textSecondary",fontWeight:"semibold",ml:2,textStyle:"caption",children:f("common.slippageSettings")}),e.jsx(Se,{content:f("common.slippageTooltip"),place:"bottom",children:e.jsx(re,{className:"ml-1",color:"secondary",name:"infoCircle",size:18})})]}),e.jsx(N,{flex:1,gap:1,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),px:3,py:2,children:e.jsx(N,{direction:"column",w:"100%",children:e.jsx(N,{gap:2.5,children:e.jsxs(gs,{onChange:c=>u(c),onChangeEnd:()=>h(!1),onChangeStart:()=>h(!0),size:"lg",value:[i,j],children:[e.jsx(fs,{bg:"textSecondary",boxSize:2,children:e.jsx(Ss,{bg:b,boxSize:2,width:"50%"})}),e.jsx(is,{hasArrow:!0,bg:"bgPrimary",isOpen:m||x,label:e.jsx(xs,{p:1,children:n===0?e.jsx(p,{color:"brand.orange",textStyle:"caption-xs",children:"No price protection"}):e.jsxs(N,{children:[e.jsx(p,{textStyle:"caption-xs",variant:"secondary",children:"Slippage:  "}),e.jsxs(p,{color:n===10?"brand.yellow":"textPrimary",textStyle:"caption-xs",children:[n,"%",n===S&&` (${f("common.recommended")})`]})]})}),placement:"top",children:e.jsx(At,{boxSize:4,index:0})}),e.jsx(At,{bgColor:b,boxSize:3,index:1,sx:{pointerEvents:"none"}}),e.jsx(N,{onClick:()=>o(0),sx:{w:4,h:4,borderRadius:"50%",bg:"textSecondary",position:"absolute",top:"50%",transform:"translateY(-50%)",left:"-8px"}}),e.jsx(N,{onClick:()=>o(1),sx:{w:4,h:4,borderRadius:"50%",bg:n>0?"textSecondary":b,position:"absolute",top:"50%",transform:"translateY(-50%)",left:`calc(${We}% - 7px)`}})]})})})})]})};function fn(t,a){let r=xn,n=100-a*r;for(;r>0&&t>n;)r-=1,n=100-a*r;return n}const Sn=({route:t,onSettingsChange:a,outputAmount:r,outputAsset:n,slippagePercent:o,setSlippagePercent:i,minReceive:l,defaultInterval:m,canStreamSwap:d,streamingSwapParams:x,streamSwap:h})=>{const S=t?.streamingSwap?.maxQuantity||0,j=t?.streamingSwap?.maxIntervalForMaxQuantity||10,b=s.useMemo(()=>qt({maxQuantity:S}),[S]),u=s.useMemo(()=>qt({minQuantity:m,maxQuantity:j,maxSteps:5}),[m,j]),[c,T]=s.useState(50),[y,v]=s.useState(!1),[C,M]=s.useState(!1),[$,k]=s.useState(null),V=hn({streamingSwapParams:x,route:t,streamSwap:h,useMaxTime:c===100}),P=t?.meta.recommendedSlippage||0,F=s.useMemo(()=>{const H=b.map((L,_)=>({label:null,subswaps:L,interval:m,value:Math.floor(50/b.length*(_+1))}));H.unshift({label:"Streaming swap turned off",subswaps:0,interval:0,value:0});const z=u.map((L,_)=>({label:null,subswaps:S,interval:L,value:Math.floor(50+50/u.length*(_+1))}));return[...H,...z]},[u,b,m,S]),U=F.map(H=>H.value),B=s.useMemo(()=>F.find(H=>c===H.value),[F,c]),I=s.useCallback(H=>{k(H),i(H)},[i]),W=H=>{const z=U.reduce((L,_)=>Math.abs(_-H)<Math.abs(L-H)?_:L,0);T(z),z>50&&($===null||o===$)&&(i(0),k(o)),z<=50&&o===0&&$&&$>0&&i($)};return s.useEffect(()=>{T(50)},[d,t?.path]),s.useEffect(()=>{B&&a?.({interval:B.interval,subswaps:B.subswaps})},[a,B]),t?e.jsx(N,{w:"100%",children:e.jsxs(zs,{gap:1,p:3,sx:{w:"full",borderRadius:16},variant:"filledContainerTertiary",children:[d&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{pb:1,children:[e.jsx(p,{color:"textSecondary",fontWeight:"semibold",ml:2,textStyle:"caption",children:f("views.swap.swapSettings")}),e.jsx(Se,{content:f("views.swap.priceOptimizationInfo"),onClick:()=>Xs(Ks),place:"bottom",children:e.jsx(re,{className:"ml-1",color:"secondary",name:"infoCircle",size:18})})]}),e.jsx(N,{flex:1,gap:1,mt:1,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:e.jsxs(N,{direction:"column",w:"100%",children:[e.jsx(N,{gap:2.5,mx:4,children:e.jsxs(Ma,{onChange:H=>W(H),onChangeEnd:()=>M(!1),onChangeStart:()=>M(!0),size:"lg",value:c,children:[e.jsx(Pa,{bg:"textSecondary",boxSize:2,children:e.jsx(Ra,{bg:c>50?"brand.yellow":"brand.btnSecondary",boxSize:2,width:"50%"})}),e.jsx(is,{hasArrow:!0,bg:"bgPrimary",isOpen:y||C,label:e.jsx(xs,{p:1,children:B?.label?e.jsx(p,{textStyle:"caption-xs",children:B?.label}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx(p,{textStyle:"caption-xs",variant:"secondary",children:"Number of subswaps:  "}),e.jsx(p,{textStyle:"caption-xs",children:B?.subswaps})]}),e.jsxs(N,{children:[e.jsx(p,{textStyle:"caption-xs",variant:"secondary",children:"Interval:  "}),e.jsxs(p,{textStyle:"caption-xs",children:[B?.interval," blocks"]})]})]})}),placement:"top",children:e.jsx(Va,{boxSize:4})}),e.jsx(N,{sx:{w:3,h:3,borderRadius:"50%",bg:c>50?"brand.yellow":"brand.btnSecondary",position:"absolute",top:"50%",transform:"translateY(-50%)",left:"-8px"}}),e.jsx(N,{sx:{w:4,h:4,borderRadius:"50%",bg:c>50?"brand.yellow":"textSecondary",position:"absolute",top:"50%",transform:"translateY(-50%)",left:"calc(50% - 7px)"}}),e.jsx(N,{sx:{w:3,h:3,borderRadius:"50%",backgroundColor:"textSecondary",position:"absolute",top:"50%",transform:"translateY(-50%)",right:"-8px"}})]})}),e.jsxs(N,{flex:1,justify:"space-between",mt:1,children:[e.jsx(N,{children:e.jsx(he,{onClick:()=>W(0),size:"xs",sx:{px:2},variant:"borderlessPrimary",children:f("views.swap.fastest")})}),e.jsx(N,{children:e.jsx(he,{onClick:()=>W(50),size:"xs",variant:"borderlessPrimary",children:f("views.swap.optimal")})}),e.jsx(N,{children:e.jsx(he,{onClick:()=>W(100),size:"xs",sx:{px:2},variant:"borderlessPrimary",children:f("views.swap.slowest")})})]})]})})]}),e.jsx(gn,{outputAmount:r,outputAsset:n,route:t,setSlippagePercent:I,slippagePercent:o}),e.jsxs(N,{flex:1,flexWrap:"wrap",ml:2,children:[e.jsxs(N,{direction:"column",flex:1,children:[e.jsx(p,{color:"textSecondary",fontWeight:"semibold",textStyle:"caption-xs",children:"Minimum:"}),e.jsx(p,{color:o===0||P>0&&P<o?"brand.yellow":"textPrimary",textStyle:"caption-xs",children:o===0?f("views.swap.noProtection"):`${l.toCurrency("")} ${n?.ticker||""}`})]}),e.jsxs(N,{flex:1,flexDirection:"column",children:[e.jsx(p,{color:"textSecondary",fontWeight:"semibold",textStyle:"caption-xs",children:"Estimated:"}),e.jsx(N,{children:e.jsxs(p,{color:c<50?"brand.yellow":c>50?"brand.green":"textPrimary",textStyle:"caption-xs",children:[r.toCurrency("")," ",n?.ticker||""]})})]}),e.jsxs(N,{flex:1,flexDirection:"column",children:[e.jsx(p,{color:"textSecondary",fontWeight:"semibold",textStyle:"caption-xs",children:"Time:"}),e.jsx(N,{children:e.jsx(p,{color:c>50?"brand.yellow":"textPrimary",textStyle:"caption-xs",children:V?Gs(V):"n/a"})})]})]}),c>50&&o>0&&e.jsxs(g,{row:!0,className:"w-full my-3 px-2",children:[e.jsx(re,{color:"yellow",name:"infoCircle",size:26})," ",e.jsx(p,{className:"ml-2",color:"brand.yellow",fontWeight:"medium",textStyle:"caption",children:f("views.swap.slippageMarketRateWarning")})]})]})}):null};function qt({minQuantity:t=0,maxQuantity:a,maxSteps:r=5}){const n=Math.min(a,r),o=Math.floor((a-t)/n),i=Array.from({length:n-1},(l,m)=>m*o+(t?o:1));return i.push(a),i}const bn=({inputAsset:t})=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{textStyle:"caption",variant:"yellow",children:["Are you looking for THUNDERSwap's protocol token ",e.jsx(os,{className:"text-twitter-blue",to:rt(t,de.fromChainOrSignature("ETH.THUNDER")),children:"$THUNDER (Ethereum ERC-20)?"})]}),e.jsx(p,{textStyle:"caption-xs",children:" "}),e.jsx(p,{textStyle:"caption",variant:"yellow",children:"You have selected $THUNDER token ticker on Avalanche C-Chain. Thor Financial is a different unaffiliated project based on the Avalanche network. "})]}),wn=({children:t,condition:a})=>oe&&a?e.jsx(Se,{className:"mb-5",content:f("components.assetSelect.ledgerLiveSwitchNotSupported"),children:t}):t,yn=({inputAsset:t,outputAsset:a,onInputAssetChange:r,onOutputAssetChange:n,onInputAmountChange:o,onSwitchPair:i,tokens:l})=>{const[m,d]=s.useState(!1),x=jt("Thorchain-supported-erc20"),h=jt("Thorchain-supported-arc20"),S=jt("Thorchain-supported-bsc20"),j=s.useMemo(()=>Ft(a.asset),[a]),b=s.useCallback(()=>{const v=t.asset.symbol.split("-")[1]?.toLowerCase(),C=t.asset.chain===R.Ethereum&&!De(t.asset)&&!x.includes(v),M=t.asset.chain===R.Avalanche&&!ot(t.asset)&&!h.includes(v),$=t.asset.chain===R.BinanceSmartChain&&!Ys(t.asset)&&!S.includes(v);i(C||M||$),d(k=>!k)},[t.asset,i,h,x,S]),u=Ba(l),{assetInputProps:c,assets:T}=$a(u),y=s.useMemo(()=>!x?.length&&!h?.length||t.asset.chain===R.Ethereum&&a.asset.chain===R.Ethereum||t.asset.chain===R.Avalanche&&a.asset.chain===R.Avalanche||t.asset.chain===R.BinanceSmartChain&&a.asset.chain===R.BinanceSmartChain||t.asset.isGasAsset?T:T.filter(({asset:C})=>De(C)||ot(C)||![R.Ethereum,R.Avalanche].includes(C?.chain)||C?.chain===R.Ethereum&&x.includes(C.symbol.split("-")[1]?.toLowerCase())||C?.chain===R.Avalanche&&h.includes(C.symbol.split("-")[1]?.toLowerCase())),[T,t.asset?.chain,t.asset?.isGasAsset,a.asset?.chain,h,x]);return e.jsxs("div",{className:"relative self-stretch md:w-full",children:[e.jsx(g,{center:!0,className:je("absolute -mt-0.5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"),children:e.jsx(wn,{condition:!j,children:e.jsx(g,{center:!0,className:je(j?"cursor-pointer hover:brightness-125":"cursor-not-allowed brightness-75 hover:brightness-100","absolute -mt-0.5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","p-1 md:p-2 rounded-xl md:rounded-[18px]","border-10 border-solid bg-blue dark:border-dark-border-primary border-transparent transition"),onClick:j?b:void 0,children:e.jsx(re,{className:je("p-1 transition-all",{"-scale-x-100":m}),color:"white",name:"arrowDown",size:20})})})}),e.jsx(Dt,{...c,assets:T.filter(v=>Ft(v.asset)),className:"!mb-1 flex-1 h-[111px]",onAssetChange:r,onValueChange:o,selectedAsset:t}),e.jsx(Dt,{...c,hideMaxButton:!0,assets:oe?y.filter(v=>Qs(v.asset)):y,className:"h-[111px]",onAssetChange:n,selectedAsset:a})]})},vn=s.memo(yn),jn=s.memo(({setConfirmedSlippage:t,slipHigherThanTolerance:a,confirmedSlippage:r,inputAsset:n,outputAsset:o,recipient:i,estimatedTime:l,slippagePercent:m,minReceive:d,totalFee:x,streamSwap:h,affiliateFee:S,feeAssets:j,swapMemo:b})=>{const u=s.useMemo(()=>qs(Js(b)),[b]);return e.jsxs(e.Fragment,{children:[h&&e.jsx(N,{_groupHover:{bgColor:"transparent"},align:"center",bgColor:"brand.btnSecondary",borderRadius:"xl",h:4,justify:"center",position:"absolute",px:4,right:-3,top:8,transform:"rotate(48deg)",w:24,children:e.jsx(p,{_groupHover:{color:"white"},fontSize:"12px",fontWeight:500,lineHeight:"16px",children:"Beta"})}),e.jsxs(g,{col:!0,children:[e.jsxs(g,{alignCenter:!0,row:!0,justify:"between",children:[e.jsxs(g,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(me,{asset:n.asset}),e.jsx(g,{center:!0,className:"pt-2",children:e.jsx(Xt,{asset:n.asset})}),e.jsx(g,{center:!0,className:"w-full",children:e.jsxs(p,{fontWeight:"medium",textStyle:"caption",children:[n.value?.toSignificant(6)," ",n.asset.ticker]})})]}),e.jsx(re,{className:"mx-2 -rotate-90",name:"arrowDown"}),e.jsxs(g,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(me,{asset:o.asset}),e.jsx(g,{center:!0,className:"pt-2",children:e.jsx(Xt,{asset:o.asset})}),e.jsx(g,{center:!0,className:"w-full",children:e.jsxs(p,{fontWeight:"medium",textStyle:"caption",children:[o.value?.toSignificant(6)," ",o.asset.ticker]})})]})]}),e.jsxs(g,{col:!0,className:"w-full py-4 border border-solid rounded-2xl border-light-border-primary dark:border-dark-border-primary",children:[e.jsxs(g,{row:!0,className:"w-full",children:[e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.estimateTime")}),e.jsx(p,{textStyle:"caption",children:l})]}),e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.fee")}),e.jsx(p,{textStyle:"caption",children:x})]}),e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.slippage")}),e.jsxs(p,{color:a?"red":"",textStyle:"caption",children:[m,"%"]})]})]}),e.jsx(g,{className:"px-4",children:e.jsx(g,{className:"w-full h-[1px] bg-light-border-primary dark:bg-dark-border-primary my-2"})}),e.jsxs(g,{row:!0,className:"w-full py-2",children:[e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("views.swap.exchangeFee")}),e.jsx(p,{className:je({"line-through":S==="$0.00"}),textStyle:"caption",children:S==="$0.00"?"FREE":S})]}),e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.recipient")}),e.jsx(p,{textStyle:"caption",children:St(i)})]}),e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("views.swap.txAssetsFee")}),e.jsx(p,{textStyle:"caption",children:j})]})]}),b?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"px-4",children:e.jsx(g,{className:"w-full h-[1px] bg-light-border-primary dark:bg-dark-border-primary my-2"})}),e.jsx(g,{row:!0,className:"w-full",children:e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2 px-4 w-[100%]",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.memo")}),e.jsx(Se,{content:b,children:e.jsx(p,{maxWidth:"full",textStyle:"caption",children:St(b,20)})})]})}),e.jsx(g,{className:"px-4",children:e.jsx(g,{className:"w-full h-[1px] bg-light-border-primary dark:bg-dark-border-primary my-2"})}),e.jsx(g,{row:!0,className:"w-full",children:e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2 px-4 w-[100%]",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.memoHex")}),e.jsx(Se,{content:u,children:e.jsx(p,{maxWidth:"100%",textStyle:"caption",children:St(u,20)})})]})})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"px-4",children:e.jsx(g,{className:"w-full h-[1px] bg-light-border-primary dark:bg-dark-border-primary my-2"})}),e.jsx(g,{row:!0,className:"w-full",children:e.jsxs(g,{center:!0,col:!0,className:"flex-1 gap-y-2",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("common.minReceived")}),m===0?e.jsx(p,{color:"brand.yellow",textStyle:"caption",children:f("views.swap.noProtection")}):e.jsx(p,{textStyle:"caption",children:d})]})})]})]}),a&&e.jsx(Zs,{className:"pt-4 pb-2",label:e.jsx(g,{alignCenter:!0,children:e.jsx(p,{children:f("views.swap.slippageConfirmationWarning")})}),onValueChange:t,value:r})]})]})}),Tn=s.memo(({affiliateFee:t,estimatedTime:a,feeAssets:r,handleSwap:n,inputAssetProps:o,minReceive:i,outputAssetProps:l,recipient:m,setVisible:d,slippagePercent:x,totalFee:h,visible:S,streamSwap:j,selectedRoute:b})=>{const[u]=ea(),{getWalletAddress:c}=Xe(),[T,y]=s.useState(!0),v=ls(({app:W})=>W.slippageTolerance),C=s.useMemo(()=>x>v,[x,v]),[M,$]=s.useState(!1),{asset:k}=o,{asset:V}=l,P=s.useMemo(()=>c(k.chain),[c,k.chain]),F=s.useMemo(()=>[P,m],[P,m]),U=s.useMemo(()=>{if(!b)return"";const{memoStreamingSwap:W,memo:H,tcMemo:z}=b.calldata;return(j&&W?W:H||z)||""},[b,j]),B=s.useCallback(async()=>{const{data:W}=await u({addresses:F,chains:[k.chain,V.chain]}),{list:H}=await Te(()=>import("./x3Ykq2LY.js"),__vite__mapDeps([0,1,2]));W?.confirm&&!F.some(z=>H.includes(z))?(d(!1),n()):y(!1)},[d,n,F,u,k.chain,V.chain]),I=s.useMemo(()=>a?a<60?`<${a}s`:`<${Math.ceil(a/60)}m`:"<5s",[a]);return e.jsx(Fa,{buttonDisabled:!T||C&&!M,inputAssets:[k],isOpened:S,onClose:()=>d(!1),onConfirm:B,children:e.jsx(jn,{affiliateFee:t,confirmedSlippage:M,estimatedTime:I,feeAssets:r,inputAsset:o,minReceive:i,outputAsset:l,recipient:m,setConfirmedSlippage:$,slipHigherThanTolerance:C,slippagePercent:x,streamSwap:j,swapMemo:U,totalFee:h})})}),Cn="No utxos to send",kn="Please wait a bit until 3 UTXO confirmations and Try again.",An=t=>t.includes(Cn)?kn:t,Nn={[te.AVAX_TO_AVAX]:Q.SWAP_AVAX_TO_AVAX,[te.AVAX_TO_BSC]:Q.SWAP_AVAX_TO_TC,[te.AVAX_TO_ETH]:Q.SWAP_AVAX_TO_TC,[te.AVAX_TO_TC_SUPPORTED]:Q.SWAP_AVAX_TO_TC,[te.BSC_TO_AVAX]:Q.BSC_TRANSFER_TO_TC,[te.BSC_TO_BSC]:Q.SWAP_BSC_TO_BSC,[te.BSC_TO_ETH]:Q.SWAP_BSC_TO_ETH,[te.BSC_TO_TC_SUPPORTED]:Q.SWAP_BSC_TO_TC,[te.ETH_TO_AVAX]:Q.SWAP_ETH_TO_AVAX,[te.ETH_TO_BSC]:Q.SWAP_ETH_TO_TC,[te.ETH_TO_ETH]:Q.SWAP_ETH_TO_ETH,[te.ETH_TO_TC_SUPPORTED]:Q.SWAP_ETH_TO_TC,[te.TC_SUPPORTED_TO_AVAX]:Q.SWAP_TC_TO_AVAX,[te.TC_SUPPORTED_TO_BSC]:Q.SWAP_TC_TO_BSC,[te.TC_SUPPORTED_TO_ETH]:Q.SWAP_TC_TO_ETH,[te.TC_SUPPORTED_TO_TC_SUPPORTED]:Q.SWAP_TC_TO_TC},_n=({recipient:t="",inputAsset:a,outputAsset:r,route:n,quoteId:o,streamSwap:i})=>{const l=cs(),{feeOptionType:m}=it(),{wallet:d}=Xe();return s.useCallback(async()=>{const h=us();try{const S=d?.[a.chain]?.address;if(n){if(!S)throw new Error("No address found");const j=`${a.toSignificant(6)} ${a.isSynthetic?"Synth ":""}${a.ticker} → ${r.toSignificant(6)} ${r.isSynthetic?"Synth ":""}${r.ticker}`,{swap:b,validateAddress:u}=await(await Te(()=>import("./G7qcxkrX.js"),__vite__mapDeps([3,1,2]))).getSwapKitClient(),c=u({chain:r.chain,address:t});if(typeof c=="boolean"&&!c)throw new Error("Invalid recipient address");const T=oe?wa:b;l(ds({id:h,label:j,from:S,inChain:a.chain,type:Nn[n.meta.quoteMode],quoteId:o,sellAmount:a.toSignificant(),sellAmountNormalized:a.toSignificant(6),recipient:t||S,streamingSwap:i}));try{const y=await T({feeOptionKey:m,recipient:t,route:n,streamSwap:i,wallet:d});typeof y=="string"?l(ms({id:h,txid:y,quoteId:o,route:n,timestamp:new Date,advancedTracker:!0})):(l(nt({id:h,status:"error"})),Pe(f("notification.submitFail"),JSON.stringify(y)))}catch(y){console.error(y),l(nt({id:h,status:"error"}));const v=y?.code===4001||y?.toString().includes("4001");Pe(f("notification.submitFail"),v?f("notification.cancelledByUser"):y?.toString())}}}catch(S){console.error(S);const j=An(S?.toString());l(nt({id:h,status:"error"})),Pe(f("notification.submitFail"),j.includes("Object")?"":j)}},[d,a,n,r,t,l,o,i,m])},On=({inputAsset:t,contract:a})=>{const r=cs(),{getWalletAddress:n}=Xe();return s.useCallback(async i=>{const l=n(t.chain);if(l){const m=us(),d=t.chain,x=d===R.Ethereum?Q.ETH_APPROVAL:d===R.Avalanche?Q.AVAX_APPROVAL:Q.BSC_APPROVAL;r(ds({id:m,from:l,inChain:d,type:x,label:`${f("txManager.approve")} ${t.ticker}`}));const{approveAssetValue:h}=await(await Te(()=>import("./G7qcxkrX.js"),__vite__mapDeps([3,1,2]))).getSwapKitClient();try{const S=await h(t.set(i||0),a);typeof S=="string"&&r(ms({id:m,txid:S}))}catch(S){console.error(S),r(nt({id:m,status:"error"})),Pe(f("notification.approveFailed"))}}},[n,t,r,a])},En=t=>{const[a,r]=s.useState(new J({value:0,decimal:Re.ETH})),n=s.useCallback(async()=>{if(!t)return r(new J({value:0,decimal:Re.ETH}));try{const o=await Ha("balanceOf",[t]);r(o)}catch(o){console.error(o)}},[t]);return s.useEffect(()=>{n()},[n]),a},Mn=({ethAddress:t,inputAsset:a,inputAmount:r,outputAsset:n,recipientAddress:o,senderAddress:i,inputUSDPrice:l,manualSlippage:m})=>{const d=ls(({app:I})=>I.iframeData),[x,h]=s.useState(!1),[S,j]=s.useState(),[b,u]=s.useState([]),c=Gt(m,200),T=Gt(r.getValue("string"),400),y=En(t),v=s.useMemo(()=>{if(d?.fee)return`${Math.floor(d.fee)}`;let I=30;return y.gte(1e3)&&(I=25),y.gte(1e4)&&(I=15),y.gte(1e5)&&(I=10),y.gte(5e5)&&(I=0),oe&&(I=50),(na||ra)&&(I=0),l>=1e6&&(I/=2),`${Math.floor(I)}`},[y,d?.fee,l]),C=s.useMemo(()=>({affiliateBasisPoints:v,affiliateAddress:d?.address||(oe?ta:sa),sellAsset:a.isSynthetic?a.symbol:a.toString(),buyAsset:n.isSynthetic?n.symbol:n.toString(),sellAmount:T,senderAddress:i,recipientAddress:o,...c&&{slippage:c.toString()}}),[v,c,T,d?.address,a,n,o,i]),{refetch:M,error:$,isLoading:k,currentData:V,isFetching:P}=aa(C,{skip:C.sellAmount==="0"||r.lte(0)}),F=s.useCallback(async I=>{try{const W=I.map(async L=>{const _=i?await Wa({assetValue:a.mul(0).add(r),contract:L.approvalTarget||L.allowanceTarget||L.targetAddress}):!0;return{...L,isApproved:_}}),z=(await Promise.all(W)).filter(Boolean).concat().sort((L,_)=>{const ie=Number(_.isApproved)-Number(L.isApproved);return ie!==0?ie:_.optimal&&!L.optimal?1:!_.optimal&&L.optimal?-1:0});u(z)}finally{h(!1)}},[a,i,r]),U=s.useMemo(()=>r.lte(0),[r]);s.useEffect(()=>{if(!(P&&b.length)){if(!V?.routes||U)return u([]);F(V.routes),h(!0)}},[V?.routes,P,U,k,b.length,F]);const B=s.useMemo(()=>$||k||r.getValue("number")===0?void 0:S||b[0],[$,r,k,b,S]);return s.useEffect(()=>{if(!$){const I=b.find(W=>JSON.stringify(W.providers)===JSON.stringify(B?.providers));j(I||b[0])}},[$,b]),s.useEffect(()=>{(a||r||n)&&u([])},[r,a,n]),{affiliateBasisPoints:v,vTHUNDERDiscount:!oe&&y.gte(1e3),error:$,estimatedTime:B?.estimatedTime,isFetching:x||k||P,refetch:M,routes:b,selectedRoute:B,setSwapRoute:j,quoteId:V?.quoteId}},Pn=s.memo(({className:t,size:a=24,duration:r=10,refresh:n})=>{const{themeType:o}=it(),{refetch:i}=Et(),l=s.useRef(!1),m=s.useRef(setTimeout(()=>{},0)),d=o===oa.Light,x=d?"#E6E9F5":"#273855",h=d?"#7C859F":"#75849D",S=a/2,j=a*Math.PI,[b,u]=s.useState(r),c=j-b*1e3/(r*1e3)*j,T=s.useCallback(()=>{l.current||(l.current=!0,clearInterval(m.current),m.current=setInterval(()=>{u(M=>M>1?M-1:(n?.(),i(),r))},1e3))},[r,n,i]),y=s.useCallback(()=>{n?.(),i(),u(r)},[r,n,i]);s.useEffect(()=>{u(r),l.current=!n,n?T():clearInterval(m.current)},[T,r,n]);const v=s.useMemo(()=>({height:a,width:a}),[a]),C="left-1.5 top-1.5 absolute w-full h-full overflow-visible";return e.jsx(Se,{content:f("common.refresh"),place:"top",children:e.jsxs(g,{center:!0,className:je("m-auto relative -rotate-90 box-content",ia,t),onClick:y,style:v,children:[e.jsx(p,{className:"rotate-90",textStyle:"caption-xs",children:b.toFixed()}),e.jsx("svg",{className:C,children:e.jsx("circle",{cx:S,cy:S,fill:"none",r:S,stroke:x,strokeWidth:2})}),e.jsx("svg",{className:C,children:e.jsx("circle",{cx:S,cy:S,fill:"none",r:S,stroke:h,strokeDasharray:j,strokeDashoffset:c,strokeLinecap:"round",strokeWidth:2})})]})})}),Rn=({isSidebarVisible:t,inputAssetChain:a,toggleSidebar:r})=>{const{data:n}=Et(),o=a,i=s.useMemo(()=>{if(!n)return;const d=n.find(h=>h&&h.chainId===kt[o])?.history.map(h=>h.value).filter(Boolean),x=n.find(h=>h&&h.chainId===kt[o]);return{values:d,historyData:x}},[n,o]),l=Nt(i?.values,i?.historyData?.average7d||i?.historyData?.average24h)?.state,m=Nt(i?.values,i?.historyData?.average7d||i?.historyData?.average24h)?.color;return e.jsx(e.Fragment,{children:e.jsx(he,{className:"group",leftIcon:e.jsx(re,{className:"group-hover:!text-light-typo-primary dark:group-hover:!text-dark-typo-primary",color:m,name:t?"gasStationOff":"gasStation"}),onClick:r,px:"2!",tooltip:t?f("views.swap.hideGasHistory"):f("views.swap.gasTooltip",{chain:o,state:l}),tooltipClasses:"text-center",tooltipPlacement:"top",variant:"borderlessTint"})})},Vn=s.memo(({refetchData:t,toggleSidebar:a,isSidebarVisible:r,inputAssetChain:n})=>e.jsx(Ua,{actionsComponent:e.jsxs(g,{center:!0,row:!0,className:"space-x-2",children:[t&&e.jsx(Pn,{duration:60,refresh:t}),e.jsx(Rn,{inputAssetChain:n,isSidebarVisible:r,toggleSidebar:a}),e.jsx(Da,{noSlippage:!0,transactionMode:!0})]}),title:f("common.swap")})),In=t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),Ct=[bt.Average,bt.Fast,bt.Fastest],$n=({affiliateBasisPoints:t,assets:[a,r],expectedOutput:n,affiliateFee:o,networkFee:i,isLoading:l,streamSwap:m,minReceive:d,minReceiveSlippage:x,setFeeModalOpened:h,showTransactionFeeSelect:S,whaleDiscount:j,vTHUNDERDiscount:b,inputUnitPrice:u,outputUnitPrice:c})=>{const{feeOptionType:T,setFeeOptionType:y}=it(),v=Ge(),[C,M]=s.useState(!1),$=s.useCallback(B=>{M(I=>!I),B.stopPropagation()},[]),{rateDesc:k,ratePrice:V}=s.useMemo(()=>{const[B,I]=[u,c].sort(()=>C?1:-1),[W,H]=[a,r].sort(()=>C?1:-1),z=B/I,L=z>1e3?4:z>1?5:8,_=C?c:u;return{rateDesc:z>0?`1 ${W} = ${z.toFixed(L)} ${H}`:"-",ratePrice:`(${v(_)})`}},[v,a,u,r,c,C]),P=s.useCallback(()=>{i+o<=0||h(!0)},[i,o,h]),F=s.useMemo(()=>j&&b?"vTHUNDER + 🐳 Whale 50% Off":j?"🐳 Whale 50% Off":b?"vTHUNDER":"",[b,j]),U=s.useMemo(()=>[{label:f("views.wallet.expectedOutput"),value:e.jsx(at,{tooltip:f("views.wallet.expectedOutputTooltip"),value:n})},m?null:{label:f("views.swap.minReceivedAfterSlip",{slippage:x>0?`${x}%`:"-"}),value:e.jsx(at,{tooltip:f("views.wallet.minReceivedTooltip"),value:x===0?e.jsx(p,{color:"brand.yellow",fontWeight:"semibold",textStyle:"caption",children:f("views.swap.noProtection")}):d})},S?{key:"keystoreFee",label:f("common.transactionFee"),value:e.jsx(za,{activeIndex:Ct.indexOf(T),dropdownPlacement:"bottom-end",onChange:B=>y(Ct[B]),options:Ct.map(In),size:"sm"})}:null,{label:e.jsxs(g,{center:!0,className:"gap-2 group",children:[e.jsx(p,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:f("views.wallet.networkFee")}),!oe&&e.jsxs(g,{center:!0,children:[e.jsx(p,{className:"italic underline",fontWeight:"normal",textStyle:"caption-xs",variant:"secondary",children:"details"}),e.jsx(re,{className:"mx-1",color:"secondary",name:"eye",size:16})]})]}),onClick:P,value:e.jsx(at,{tooltip:f("views.swap.networkFeeTooltip"),value:e.jsx(g,{center:!0,children:e.jsx(p,{textStyle:"caption",children:v(i)})})})},{label:f("views.swap.exchangeFee"),value:e.jsx(at,{tooltip:t?f("views.swap.affiliateFee",{percent:`${(t/100).toFixed(2)}%`}):"",value:e.jsxs(g,{center:!0,row:!0,className:"gap-1",children:[F&&e.jsxs(g,{row:!0,className:"gap-1",children:[e.jsx(p,{fontWeight:"bold",textStyle:"caption-xs",variant:"green",children:F}),e.jsx(p,{textStyle:"caption-xs",variant:"secondary",children:f("views.swap.discountApplied")})]}),o?e.jsx(p,{textStyle:"caption",children:v(o)}):e.jsx(p,{fontWeight:"bold",textStyle:"caption",variant:"green",children:"FREE"})]})})}].filter(Boolean),[t,o,F,n,T,v,d,x,i,P,y,S,m]);return e.jsx(ns,{className:"self-stretch mt-5 !bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl flex-col",shadow:!1,title:e.jsxs(g,{alignCenter:!0,className:"gap-1 flex-1",justify:"between",children:[e.jsx(he,{className:"!p-1 !h-auto",leftIcon:e.jsx(re,{name:"switch",size:16}),onClick:$,tooltip:f("views.swap.swapAssets"),variant:"outlinePrimary"}),l?e.jsx(g,{alignCenter:!0,className:"px-2",flex:1,justify:"start",children:e.jsx(re,{spin:!0,name:"loader",size:14})}):e.jsxs(g,{alignCenter:!0,className:"gap-x-1 flex-wrap flex-1 pl-1",children:[e.jsx(g,{center:!0,className:"gap-1.5",children:e.jsx(p,{fontWeight:"normal",textStyle:"caption",variant:"primary",children:k})}),e.jsx(p,{fontWeight:"normal",textStyle:"caption",variant:"secondary",children:V})]}),e.jsx(g,{className:"pr-1",children:e.jsx(he,{className:"h-[30px] px-2",leftIcon:e.jsx(re,{color:"secondary",name:"fees",size:18}),tooltip:f("views.swap.totalFeeTooltip"),variant:"tint",children:e.jsx(p,{children:v(i+o)})})})]}),titleClassName:"pr-1",children:e.jsx(g,{col:!0,className:"w-full",children:e.jsx(hs,{items:U})})})},Bn=async t=>{const{connectedWallets:a,validateAddress:r}=await(await Te(()=>import("./G7qcxkrX.js"),__vite__mapDeps([3,1,2]))).getSwapKitClient();if(!a.BNB||!r({address:t,chain:R.Binance}))return!1;const{BinanceToolbox:n}=await Te(()=>import("./9Kp3GYpY.js").then(l=>l.s),__vite__mapDeps([4,1,2])),o=n({}),{flags:i}=await o.getAccount(t);return typeof i=="number"&&i!==0},Fn=t=>{const[a,r]=s.useState(!1);return s.useEffect(()=>{(async()=>{if(t){const o=await Bn(t);r(o)}})()},[t]),{isExchangeBNBAddress:a}},Hn=({hasQuote:t,quoteError:a,invalidSwap:r,inputAmount:n,inputAsset:o,isApproved:i,isInputWalletConnected:l,isOutputWalletConnected:m,isLoading:d,outputAsset:x,recipient:h,setVisibleApproveModal:S,setVisibleConfirmModal:j})=>{const{setIsConnectModalOpen:b}=la(),{getWallet:u}=Xe(),{connectLedgerLiveWallet:c}=ca(),{getChainTradingPaused:T}=ua(),{numberOfPendingApprovals:y}=da(),v=s.useMemo(()=>T(o.chain)||T(x.chain),[T,o.chain,x.chain]),C=s.useMemo(()=>!!u(o.chain),[u,o.chain]),{isExchangeBNBAddress:M}=Fn(x.chain===R.Binance?h:null),$=s.useCallback(async()=>{try{if(!h)return!0;const{validateAddress:I}=await(await Te(()=>import("./G7qcxkrX.js"),__vite__mapDeps([3,1,2]))).getSwapKitClient(),W=I({chain:x.chain,address:h});return typeof W>"u"?!0:W}catch(I){return console.error(I),!1}},[x,h]),k=s.useCallback(async()=>{C?t?M?Pe(f("notification.exchangeBNBAddy"),f("notification.exchangeBNBAddyDesc")):await $()?j(!0):Pe(f("notification.invalidRecipientAddy"),f("notification.invalidRecipientAddyDesc")):wt(f("notification.noValidQuote")):wt(f("notification.walletNotFound"),f("notification.connectWallet"))},[C,t,M,$,j]),V=s.useCallback(()=>{l?S(!0):wt(f("notification.walletNotFound"),f("notification.connectWallet"))},[l,S]),P=s.useMemo(()=>!r&&!v&&t&&n.gt(0),[t,n,r,v]),F=s.useMemo(()=>v?f("notification.swapNotAvailable"):a?f("views.swap.noValidQuote"):o.isSynthetic&&x.isSynthetic||P?f("common.swap"):o.isSynthetic?f("txManager.redeem"):x.isSynthetic?f("txManager.mint"):f("common.swap"),[v,a,o.isSynthetic,x.isSynthetic,P]),U=s.useMemo(()=>t&&l&&i===!1,[t,l,i]),B=s.useMemo(()=>!l||!(m||h),[l,m,h]);return e.jsx(g,{className:"w-full pt-5 gap-x-2",children:B?e.jsx(he,{stretch:!0,onClick:()=>oe?c(l?[x.chain]:void 0):b(!0),size:"lg",variant:"fancy",children:l&&!oe?f("views.swap.connectOrFillRecipient"):f("common.connectWallet")}):U&&!a?e.jsx(he,{stretch:!0,loading:!!y||d,onClick:V,size:"lg",variant:"fancy",children:f("txManager.approve")}):e.jsx(he,{stretch:!0,disabled:!P,error:!P,loading:d,onClick:k,size:"lg",variant:"fancy",children:F})})},Jt=de.fromChainOrSignature(oe?R.Bitcoin:R.Ethereum),Zt=de.fromChainOrSignature(oe?R.Ethereum:R.Bitcoin),Ln=()=>{const[t]=ma(),a=pa(),r=rs(),{getMaxBalance:n}=ya(),{keystore:o}=ha(),{getWallet:i,getWalletAddress:l}=Xe(),{analyticsVisible:m,toggleAnalytics:d}=it(),{pair:x}=xa(),[h,S]=s.useMemo(()=>(x||"").split("_"),[x]),j=s.useMemo(()=>{if(!x||!h)return Jt;const[D,se,ne]=h.split("."),Oe=D===R.THUNDERChain&&ne?`${D}.${se}/${ne}`:h;return de.fromStringSync(Oe)||Jt},[h,x]),b=s.useMemo(()=>{if(!x||!S)return Zt;const[D,se,ne]=S.split("."),Oe=D===R.THUNDERChain&&ne?`${D}.${se}/${ne}`:S;return de.fromStringSync(Oe)||Zt},[S,x]),u=s.useMemo(()=>j,[j.toString()]),c=s.useMemo(()=>b,[b.toString()]);s.useEffect(()=>{ga("swapPair",{sell:u.toString(),buy:c.toString()})},[u,c]);const[T,y]=s.useState(Ht),[v,C]=s.useState(j.set(0)),[M,$]=s.useState(""),[k,V]=s.useState(""),[P,F]=s.useState(!1),[U,B]=s.useState(!1),[I,W]=s.useState(!1),H=Ge(),z=s.useMemo(()=>l(R.Ethereum),[l]),{tokens:L}=va(),[_,ie]=s.useMemo(()=>[L.find(({identifier:D})=>D.toUpperCase()===`${u.chain}.${u.symbol}`.toUpperCase()),L.find(({identifier:D})=>D.toUpperCase()===`${c.chain}.${c.symbol}`.toUpperCase())],[u.chain,u.symbol,c.chain,c.symbol,L]),X=s.useMemo(()=>new J({value:t.get("sellAmount")||"0",decimal:u.decimal}),[u.decimal,t]),Ve=s.useCallback(D=>{const se=D.getValue("string"),ne=r.pathname.split("?")[0];a(`${ne}?sellAmount=${se}`)},[r.pathname,a]);s.useEffect(()=>{if(oe){$(l(c.chain)),V(l(u.chain));return}Te(()=>import("./G7qcxkrX.js"),__vite__mapDeps([3,1,2])).then(({getSwapKitClient:D})=>D()).then(({getAddress:D})=>{$(D(c.chain)||""),V(D(u.chain)||"")})},[l,u.chain,c]),s.useEffect(()=>{const D=De(u)||ot(u)?Re.ETH:_?.decimals,se=De(c)||ot(c)?Re.ETH:ie?.decimals;L.length&&(u.decimal=D,c.decimal=se)},[u,_?.decimals,c,ie?.decimals,L]);const K=s.useMemo(()=>[R.Litecoin,R.Dogecoin,R.BitcoinCash].includes(u.chain)&&i(u.chain)?.walletType===fa.LEDGER,[i,u.chain]),{refetch:Ke,isLoading:Z,inputUnitPrice:q,outputUnitPrice:Ce}=Sa([u,c]),Ie=s.useMemo(()=>q*X.getValue("number"),[X,q]),[$e,ke]=s.useState(0);s.useEffect(()=>{(u||c)&&ke(0)},[u,c]);const{affiliateBasisPoints:Be,estimatedTime:Ae,isFetching:xe,refetch:Ye,routes:ut,error:Y,selectedRoute:Qe,setSwapRoute:Fe,quoteId:Ne,vTHUNDERDiscount:ee}=Mn({ethAddress:z,inputAmount:X,inputAsset:u,inputUSDPrice:Ie,manualSlippage:$e,outputAsset:c,recipientAddress:M,senderAddress:k}),{streamSwap:ge,canStreamSwap:qe,minReceive:be,outputAmount:ae,fees:we,route:le,streamingSwapParams:dt,setStreamingSwapParams:mt,slippagePercent:He,setSlippagePercent:pt,defaultInterval:ht}=un({selectedRoute:Qe,inputAmount:X,noPriceProtection:K,outputAsset:c,setManualSlippage:ke}),{isKyberSwapPage:fe,kyberRoutes:Je}=cn({routes:ut}),Ze=s.useMemo(()=>Ce*ae.getValue("number"),[Ce,ae]),ye=s.useMemo(()=>!!i(u.chain),[i,u.chain]),xt=s.useMemo(()=>ye?v:void 0,[ye,v]),w=s.useMemo(()=>({asset:u,logoURI:_?.logoURI,value:X,balance:xt,usdPrice:Ie,priceLoading:Z}),[u,_?.logoURI,X,xt,Ie,Z]),A=s.useMemo(()=>({asset:c,logoURI:ie?.logoURI,value:ae,usdPrice:Ze,loading:xe,priceLoading:Z||xe}),[c,ie?.logoURI,ae,Ze,xe,Z]),{approvalTarget:E,allowanceTarget:O,targetAddress:G}=le||{},ue=s.useMemo(()=>le?.meta?.quoteMode||"",[le?.meta?.quoteMode]),{firstNetworkFee:ce,affiliateFee:pe,networkFee:Le,totalFee:Vt}=ws(we),js=On({contract:E||O||G,inputAsset:u}),Ts=s.useMemo(()=>[...new Set(Object.values(we||{}).flat().map(({asset:D})=>D.split(".")[1]))].join(", "),[we]),et=s.useCallback(D=>async se=>{const ne=D==="input",_e=ne?se:se.eq(u)?c:u,Oe=ne?se.eq(c)?u:c:se;if(ne){const gt=await n(se)||Ht;Ve(X.gt(gt)?new J({value:gt.getValue("string"),decimal:gt.decimal}):X)}const Vs=fe?Lt(_e,Oe):rt(_e,Oe);a(`${Vs}?sellAmount=${X.getValue("string")}`)},[n,X,u,a,c,Ve,fe]),Cs=s.useCallback(D=>{y(ae.gt(T)?T:ae);const se=De(c)?de.fromChainOrSignature(oe?R.Bitcoin:"ETH.THUNDER"):de.fromChainOrSignature(R.Ethereum),ne=D?se:u,_e=fe?Lt(c,ne):rt(c,ne);a(`${_e}?sellAmount=${ae.getValue("string")}`)},[ae,T,c,u,fe,a]),ks=s.useCallback(()=>{Ke(),Ye()},[Ke,Ye]),As=_n({inputAsset:u.set(X.getValue("string")),outputAsset:c.set(ae.getValue("string")),quoteMode:ue,recipient:M,route:le,quoteId:Ne,streamSwap:ge});s.useEffect(()=>{C(void 0),n(u).then(D=>C(D))},[u,n]);const It=s.useMemo(()=>be.gte(0)?`${be.toSignificant(6)} ${c.ticker.toUpperCase()}`:"-",[be,c.ticker]),$t=s.useMemo(()=>!!i(c.chain),[i,c.chain]),Ns=s.useMemo(()=>ye&&u.chain===R.Ethereum&&!!o,[u.chain,ye,o]),tt=s.useMemo(()=>c.ticker.includes("THUNDER")&&c.chain===R.Avalanche,[c]),st=s.useMemo(()=>c.ticker==="THUNDER"&&c.chain===R.Ethereum,[c]),_s=s.useMemo(()=>tt||st,[tt,st]),Os=s.useMemo(()=>tt?e.jsx(bn,{inputAsset:u}):st?e.jsx(mn,{inputAsset:u}):null,[u,tt,st]),Es=s.useMemo(()=>v?X.gt(v):!1,[X,v]),Ms=s.useMemo(()=>[u.ticker,c.ticker],[u.ticker,c.ticker]),Ps=s.useCallback(()=>et("input"),[et]),Rs=s.useCallback(()=>et("output"),[et]);return e.jsxs(N,{alignSelf:"center",gap:3,w:"full",children:[e.jsx(N,{flex:1,justify:"center",transition:Ot,children:e.jsxs(ba,{description:f("views.swap.description",{inputAsset:u.ticker.toUpperCase(),outputAsset:c.ticker.toUpperCase()}),header:e.jsx(Vn,{inputAssetChain:u.chain,isSidebarVisible:m,refetchData:!le||xe||Z?void 0:ks,toggleSidebar:()=>d(!m)}),keywords:`${u.ticker}, ${c.ticker}, SWAP, THUNDERSwap, THUNDERChain, DEX, DeFi`,title:`${f("common.swap")} ${u.ticker} to ${c.ticker}`,children:[e.jsx(vn,{inputAsset:w,onInputAmountChange:Ve,onInputAssetChange:Ps(),onOutputAssetChange:Rs(),onSwitchPair:Cs,outputAsset:A,tokens:L}),!oe&&e.jsx(La,{isOutputWalletConnected:$t,outputAssetchain:c.chain,recipient:M,setRecipient:$}),e.jsx(Sn,{canStreamSwap:qe,defaultInterval:ht,minReceive:be,onSettingsChange:mt,outputAmount:ae,outputAsset:c,route:le,setSlippagePercent:pt,slippagePercent:He,streamSwap:ge,streamingSwapParams:dt}),e.jsx($n,{affiliateBasisPoints:Number(Be),affiliateFee:pe,assets:Ms,expectedOutput:`${ae?.toSignificant(6)} ${c.ticker.toUpperCase()}`,inputUnitPrice:q,isLoading:Z,minReceive:It,minReceiveSlippage:He,networkFee:Le,outputUnitPrice:Ce,setFeeModalOpened:W,showTransactionFeeSelect:Ns,streamSwap:ge,vTHUNDERDiscount:ee,whaleDiscount:Ie>=1e6}),_s&&e.jsx(Wt,{className:"!mt-2",content:Os,type:"warn"}),K&&e.jsx(Wt,{className:"!mt-2",content:f("views.swap.priceProtectionUnavailableDesc",{chain:u.chain}),title:f("views.swap.priceProtectionUnavailable"),type:"warn"}),e.jsx(on,{outputAsset:c,outputUnitPrice:Ce,routes:fe?Je:ut,selectedRoute:fe?Je[0]:le,setSwapRoute:Fe,streamSwap:ge}),e.jsx(Hn,{hasQuote:!!le,inputAmount:X,inputAsset:u,invalidSwap:Es,isApproved:!!le?.isApproved,isInputWalletConnected:ye,isLoading:xe||Z,isOutputWalletConnected:$t,outputAsset:c,quoteError:!!Y,recipient:M,setVisibleApproveModal:B,setVisibleConfirmModal:F}),e.jsx(Tn,{affiliateFee:H(pe),estimatedTime:Ae,feeAssets:Ts,handleSwap:As,inputAssetProps:w,minReceive:It,outputAssetProps:A,recipient:M,selectedRoute:le,setVisible:F,slippagePercent:He,streamSwap:ge,totalFee:H(Vt),visible:P}),e.jsx(Ia,{balance:v,handleApprove:js,inputAsset:u,setVisible:B,totalFee:H(ce),visible:U}),e.jsx(ln,{fees:we,isOpened:I,onClose:()=>W(!1),totalFee:H(Vt)})]})}),e.jsx(en,{analyticsVisible:m,inputAssetChain:u.chain,toggleAnalytics:d})]})},br=Ln;export{br as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["x3Ykq2LY.js","assets/index-BDcs8OaA.js","assets/index-PWKo4Vxk.css","G7qcxkrX.js","9Kp3GYpY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
