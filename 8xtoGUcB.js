import{j as M,B as J,h as Z,T as z,r as e,k as c,M as i,aV as Q,aW as m,$ as tt,v as at,g as et,F as nt,x as y,aX as C,aY as k,t as b,aZ as E,_ as st,a_ as O,a$ as V,b0 as v,b1 as p,a1 as R,b2 as P,b3 as N,b4 as F}from"./assets/index-BDcs8OaA.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="78410b4c-5269-402f-b3d5-2844c7f33d1c",t._sentryDebugIdIdentifier="sentry-dbid-78410b4c-5269-402f-b3d5-2844c7f33d1c")}catch{}})();const rt={BTC:"bg-chain-btc",ETH:"bg-chain-eth",AVAX:"bg-chain-eth",BCH:"bg-chain-bch",BNB:"bg-chain-bnb",THUNDER:"bg-chain-thor",DOGE:"bg-chain-doge",LTC:"bg-chain-ltc",GAIA:"bg-chain-cos",BSC:"bg-chain-bsc",ARB:"bg-chain-arb",MATIC:"bg-chain-matic",OP:"bg-",MAYA:"bg-",KUJI:"bg-"},lt=({asset:t})=>M.jsx(J,{className:Z("px-2 rounded-full",rt[t.chain]),children:M.jsx(z,{textStyle:"caption",children:t.type})});var ct=(t=>(t.Unstake="unstake",t.Deposit="deposit",t))(ct||{});const ut=t=>{const[n,T]=e.useState(new c({value:0,decimal:i.ETH})),u=e.useCallback(async()=>{if(t){const S=await Q(m.STAKING_THUNDER),{amount:g}=await S.userInfo(0,t);T(c.fromBigInt(g,i.ETH))}},[t]);return e.useEffect(()=>{u()},[u]),{stakedThorAmount:n,hasStakedV1Thor:n.gt(0)}},ot=async()=>{const n=await(await N(O[V.THUNDER])).balanceOf(O[V.VTHUNDER]);return c.fromBigInt(n,18)},w=async(t,n)=>{try{const u=await(await N(F[m.VTHUNDER].address,F[m.VTHUNDER].abi))[t](...n??[])||0;return c.fromBigInt(u,i.ETH)}catch{return new c({value:0,decimal:i.ETH})}},gt=()=>{const t=tt(),[n,T]=e.useState(new c({value:0,decimal:i.ETH})),[u,S]=e.useState(new c({value:0,decimal:i.ETH})),[g,U]=e.useState(new c({value:0,decimal:i.ETH})),[j,x]=e.useState(new c({value:0,decimal:i.ETH})),[q,A]=e.useState(new c({value:0,decimal:i.ETH})),{getWalletAddress:B}=at(),s=e.useMemo(()=>B(et.Ethereum),[B]),_=e.useCallback(async()=>{const a=await ot();T(a);const r=await nt.get("https://api.thorswap.net/aggregator/stats/supply/circulating");S(new c(r))},[]),I=e.useCallback(async()=>{const a=await w("totalSupply");U(a)},[]),d=e.useCallback((a=!1)=>a?n.eqValue(0)?new c(1):g.div(n):g.eqValue(0)?new c(1):n.div(g),[n,g]),G=e.useCallback((a=!1)=>{const r=d(!a);return a?`1 vTHUNDER = ${r.toSignificant(4)} THUNDER`:`1 THUNDER = ${r.toSignificant(4)} vTHUNDER`},[d]),K=e.useCallback(async()=>{if(!s)return;const a=y.fromChainOrSignature("ETH.THUNDER"),r=C();t(k({id:r,from:s,label:`${b("txManager.approve")} ${a.ticker}`,inChain:a.chain,type:E.ETH_APPROVAL}));const{approveAssetValue:l}=await(await st(()=>import("./G7qcxkrX.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();try{const o=await l(a,O[V.VTHUNDER]);typeof o=="string"&&t(v({id:r,txid:o}))}catch(o){console.error(o),t(p({id:r,status:"error"})),R(b("notification.approveFailed"))}},[s,t]),L=e.useCallback(a=>a.mul(d(!0)).toSignificant(),[d]),W=e.useCallback(a=>a.mul(d()).toSignificant(),[d]),$=e.useCallback(async()=>{if(!s){A(new c({value:0,decimal:i.ETH}));return}const a=await w("balanceOf",[s]);A(a)},[s]),D=e.useCallback(async()=>{if(!s){x(new c({value:0,decimal:i.ETH}));return}const a=await w("balanceOf",[s]),r=await w("previewRedeem",[a]);return x(r)},[s]),H=e.useCallback(()=>{_(),I(),D(),s&&$()},[_,I,D,s,$]),X=e.useCallback(async(a,r)=>{if(a.eq(0))return;const l=C(),o=y.fromChainOrSignature("ETH.THUNDER",a.getValue("string"));if(t(k({id:l,from:s,label:`${b("txManager.stake")} ${a.toSignificant()} ${o.ticker}`,inChain:o.chain,type:E.ETH_STATUS})),!s)throw new Error("No ETH address");let h;try{h=await P(m.VTHUNDER,"deposit",[a.getBaseValue("bigint"),r])}catch(f){return R(b("notification.stakeFailed"),f?.message||f?.toString()),t(p({id:l,status:"error"}))}t(h?v({id:l,txid:h}):p({id:l,status:"mined"}))},[t,s]),Y=e.useCallback(async(a,r)=>{const l=y.fromChainOrSignature("ETH.vTHUNDER",a.getValue("string")),o=C();t(k({id:o,from:s,label:`${b("txManager.unstake")} ${a.toSignificant()} ${l.ticker}`,inChain:l.chain,type:E.ETH_STATUS}));let h;try{h=await P(m.VTHUNDER,"redeem",[a.getBaseValue("bigint"),r,r])}catch(f){return R(b("notification.stakeFailed"),f?.message||f?.toString()),t(p({id:o,status:"error"}))}t(h?v({id:o,txid:h}):p({id:o,status:"mined"}))},[t,s]);return e.useEffect(()=>H(),[H]),{thorStaked:n,thorRedeemable:j,stakePercentageRate:u.gt(0)?n.div(u).mul(100).getValue("number").toFixed(2):0,vthorBalance:q,vthorTS:g,getRate:d,getRateString:G,approveTHUNDER:K,handleRefresh:H,previewDeposit:L,previewRedeem:W,stakeThor:X,unstakeThor:Y}};export{lt as C,ct as S,ut as a,w as g,gt as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["G7qcxkrX.js","assets/index-BDcs8OaA.js","assets/index-PWKo4Vxk.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
