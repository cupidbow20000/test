import{r as s,_ as ce,g as te,a_ as E,V as Z,j as e,B as t,d as C,t as a,ac as A,T as o,o as k,bV as se,M as w,bY as de,bw as G,L as ue,R as he,H as me,be as W,bZ as xe,k as v,K as pe,v as fe,x as J,a$ as Q,a8 as ge,a9 as P,h as R,b as je,b_ as be,b3 as we}from"./assets/index-BDcs8OaA.js";import{I as ke}from"./uJJRkjMC.js";import{T as ye}from"./6QZjTHo4.js";import{V as Te}from"./bwNrJKc_.js";import{u as L,S as x,C as ee,a as ve}from"./8xtoGUcB.js";import{M as Ce}from"./PS2G-Da1.js";import{C as Ne}from"./y5ax0GID.js";import{f as Se}from"./4NM4FHjY.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[r]="40ec759d-a92b-466c-9aee-c0305c238bf2",i._sentryDebugIdIdentifier="sentry-dbid-40ec759d-a92b-466c-9aee-c0305c238bf2")}catch{}})();const Ve=s.memo(({action:i,assetValue:r,disabledButton:u,ethAddress:n,handleVthorAction:p,setIsConnectModalOpen:d})=>{const[f,c]=s.useState(!1),{approveTHUNDER:N}=L(),y=s.useCallback(async()=>{const{connectedWallets:m}=await(await ce(()=>import("./G7qcxkrX.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient(),j=m[te.Ethereum];if(!j||!n)return;const T=await j?.isApproved?.({from:n,spenderAddress:E[Z.VTHUNDER],assetAddress:E[Z.THUNDER],amount:r.bigIntValue||Ce});c(!!T)},[r.bigIntValue,n]);return s.useEffect(()=>{y()},[y]),e.jsx(t,{className:"self-stretch pt-5",children:n?e.jsx(t,{className:"w-full",children:i===x.Deposit?e.jsx(e.Fragment,{children:f?e.jsx(C,{stretch:!0,disabled:u,onClick:p,size:"lg",variant:"fancy",children:a("txManager.stake")}):e.jsx(C,{stretch:!0,loading:!1,onClick:N,size:"lg",variant:"fancy",children:a("txManager.approve")})}):e.jsx(C,{stretch:!0,disabled:u,onClick:p,size:"lg",variant:"fancy",children:a("views.stakingVThor.unstake")})}):e.jsx(C,{stretch:!0,onClick:()=>d(!0),size:"lg",variant:"fancy",children:a("common.connectWallet")})})}),He=({outputAmount:i,stakingAsset:r,handleAction:u,closeModal:n,isOpened:p,outputAsset:d})=>{const f=s.useCallback(()=>{n(),u()},[n,u]);return e.jsx(Ne,{inputAssets:[r],isOpened:p,onClose:n,onConfirm:f,children:e.jsx(t,{className:"w-full",children:e.jsxs(t,{alignCenter:!0,row:!0,className:"w-full",justify:"between",children:[e.jsxs(t,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(A,{asset:r}),e.jsx(t,{center:!0,className:"pt-2",children:e.jsx(ee,{asset:r})}),e.jsx(t,{center:!0,className:"w-full",children:e.jsxs(o,{fontWeight:"medium",textStyle:"caption",children:[r.toSignificant(6)," ",r.ticker]})})]}),e.jsx(k,{className:"mx-2 -rotate-90",name:"arrowDown"}),e.jsxs(t,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(A,{asset:d}),e.jsx(t,{center:!0,className:"pt-2",children:e.jsx(ee,{asset:d})}),e.jsx(t,{center:!0,className:"w-full",children:e.jsxs(o,{fontWeight:"medium",textStyle:"caption",children:[i," ",d.ticker]})})]})]})})})},Ie=s.memo(({walletType:i})=>{const r=s.useCallback(async()=>{await(i===se.XDEFI?window.xfi?.ethereum:window.ethereum)?.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:E.VTHUNDER,symbol:"vTHUNDER",decimals:w.ETH,image:de("vthor","png")}}})},[i]);return e.jsx(C,{onClick:r,rightIcon:e.jsx(k,{name:"metamask",size:16}),textTransform:"none",variant:"outlineTint",children:a("views.stakingVThor.addVTHUNDER")})}),Oe=s.memo(({walletType:i,ethAddress:r})=>{const[u,n]=s.useState(!1),[p,d]=s.useState(!0),[f,c]=s.useState(0),{getRate:N,stakePercentageRate:y,thorStaked:m,vthorBalance:j,handleRefresh:T}=L(),{hasStakedV1Thor:S}=ve(r),V=s.useCallback(()=>{n(!0),T(),setTimeout(()=>n(!1),1e3)},[T]),H=s.useCallback(async()=>{if(m&&m.gt(0))try{const b=await Se(m.getValue("number"));c(b)}catch(b){console.error(b),c(0)}},[m]);return s.useEffect(()=>{H()},[H]),s.useEffect(()=>{d(S)},[S]),e.jsxs(t,{col:!0,className:"mt-5 gap-2",children:[p&&e.jsx(G,{content:e.jsxs(e.Fragment,{children:[a("views.stakingVThor.stakeInfoDescription"),e.jsx(ue,{className:"text-twitter-blue",to:he.LegacyStake,children:a("views.stakingVThor.goToUnstake")})]}),onClose:()=>d(!1),title:a("views.stakingVThor.stakeInfoTitle"),type:"warn"}),e.jsx(G,{type:"info",children:e.jsxs(t,{col:!0,className:"self-stretch gap-3 px-3 py-1",children:[e.jsxs(t,{alignCenter:!0,row:!0,className:"pb-2 border-0 border-b border-solid border-opacity-20 border-light-border-primary dark:border-dark-border-primary",justify:"between",children:[e.jsx(o,{fontWeight:"semibold",textStyle:"subtitle2",children:a("views.stakingVThor.statTitle")}),e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-2",children:[e.jsx(Ie,{walletType:i}),e.jsx(me,{iconName:"refresh",onClick:V,spin:u})]})]}),e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-x-1",children:[e.jsx(o,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.stakingApy")}),e.jsx(W,{className:"cursor-pointer",content:a("views.stakingVThor.apyTip"),children:e.jsx(k,{color:"primaryBtn",name:"infoCircle",size:16})})]}),e.jsx(o,{fontWeight:"medium",textStyle:"subtitle2",children:f>0?`${xe(f,3)}%`:"-"})]}),e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-x-1",children:[e.jsx(o,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.totalStaked")}),e.jsx(W,{className:"cursor-pointer",content:a("views.stakingVThor.totalThorTip"),children:e.jsx(k,{color:"primaryBtn",name:"infoCircle",size:16})})]}),e.jsxs(o,{fontWeight:"medium",textStyle:"subtitle2",children:[m.toAbbreviation()," / ",y,"%"]})]}),e.jsxs(t,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsx(t,{alignCenter:!0,row:!0,className:"gap-x-1",children:e.jsx(o,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.redeemableBalance")})}),e.jsx(o,{fontWeight:"medium",textStyle:"subtitle2",children:j.gt(0)?`${j.mul(N()).toCurrency("")} / ${j.toCurrency("")}`:"-"})]})]})})]})}),Re=async(i,r)=>{try{const n=await(await we(E[i])).balanceOf(r);return v.fromBigInt(n,w.ETH)}catch{return new v({value:0,decimal:w.ETH})}},Ee=()=>{const i=[{label:a("views.stakingVThor.stakeVThor"),value:x.Deposit},{label:a("views.stakingVThor.unstake"),value:x.Unstake}],[r,u]=s.useState(x.Deposit),[n,p]=s.useState(new v({value:0,decimal:w.ETH})),[d,f]=s.useState(new v({value:0,decimal:w.ETH})),[c,N]=s.useState(new v({value:0,decimal:w.ETH})),[y,m]=s.useState("0"),[j,T]=s.useState(!0),[S,V]=s.useState(!1),{getRateString:H,previewDeposit:b,previewRedeem:I,stakeThor:K,unstakeThor:X}=L(),{setIsConnectModalOpen:ae}=pe(),{getWallet:Y}=fe(),h=s.useMemo(()=>r===x.Deposit,[r]),[O,B]=s.useMemo(()=>[J.fromChainOrSignature(h?"ETH.THUNDER":"ETH.vTHUNDER"),J.fromChainOrSignature(h?"ETH.vTHUNDER":"ETH.THUNDER")],[h]),{walletType:D,address:g}=s.useMemo(()=>Y(te.Ethereum)||{walletType:void 0,address:void 0},[Y]),M=s.useCallback(async(l,U,$)=>{const q=await Re(l,U);$==="thor"?p(q):f(q)},[]);s.useEffect(()=>{g?(M(Q.THUNDER,g,"thor"),M(Q.VTHUNDER,g,"vthor")):(p(new v({value:0,decimal:w.ETH})),f(new v({value:0,decimal:w.ETH})))},[g,M]);const re=s.useCallback(()=>{const l=h?n:d;N(l),m(h?b(l):I(l))},[h,n,d,b,I]),_=s.useCallback((l,U)=>{N(l);const $=U===x.Deposit?b(l):I(l);m($)},[b,I]),z=s.useCallback(()=>{if(!g)return;(h?K:X)(c,g)},[g,c,h,K,X]),ne=s.useCallback(()=>{D===se.KEYSTORE?V(!0):z()},[D,z]),le=s.useCallback(()=>{V(!1)},[]),F=s.useCallback(l=>{u(l),T(l!==x.Deposit),_(c,l)},[c,_]),ie=s.useCallback(()=>{F(r===x.Deposit?x.Unstake:x.Deposit)},[r,F]),oe=s.useMemo(()=>c.lte(0)||h&&c.gt(n)||!h&&c.gt(d),[c,h,n,d]);return e.jsxs(t,{col:!0,className:"self-center w-full max-w-[480px] mt-2",children:[e.jsx(ge,{content:a("views.stakingVThor.description"),keywords:"THUNDER, vTHUNDER, Staking, THUNDERSwap, DEFI, DEX",title:a("views.stakingVThor.title")}),e.jsx(Te,{title:a("views.stakingVThor.stakeVThorTitle")}),e.jsxs(t,{alignCenter:!0,className:"px-3",justify:"between",children:[e.jsx(o,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.stakeVThorSubtitle")}),e.jsx(W,{content:a("views.stakingVThor.stakeInfo"),place:"bottom",children:e.jsx(k,{color:"primaryBtn",name:"infoCircle",size:24})})]}),e.jsx(Oe,{ethAddress:g,walletType:D}),e.jsxs(P,{stretch:!0,className:"!rounded-2xl md:!rounded-3xl !p-4 flex-col items-center self-stretch mt-2 space-y-1 shadow-lg md:w-full md:h-auto",size:"lg",children:[e.jsx(t,{className:"self-stretch",children:e.jsx(ye,{onChange:F,tabs:i,value:r})}),e.jsxs(t,{className:"relative self-stretch",children:[e.jsx(t,{center:!0,className:R("z-10 absolute -mt-0.5 -bottom-6 left-1/2 -translate-x-1/2","p-1 md:p-2 rounded-xl md:rounded-[18px] cursor-pointer","border-10 border-solid bg-blue dark:border-dark-border-primary border-transparent hover:brightness-125 transition"),onClick:ie,children:e.jsx(k,{className:R("p-1 transition-all",{"-scale-x-100":h}),color:"white",name:"arrowDown",size:20})}),e.jsx(je,{className:R("!gap-1 !justify-start flex-1 !px-4 md:!px-6 !py-4"),children:e.jsxs(t,{alignCenter:!0,col:!0,className:"self-stretch flex-1 md:pl-0",children:[e.jsx(t,{className:"gap-3 self-stretch !mb-3",children:e.jsxs(t,{alignCenter:!0,flex:1,justify:"between",children:[e.jsx(o,{className:"-ml-1",fontWeight:"normal",variant:"secondary",children:a("views.stakingVThor.send")}),e.jsxs(t,{center:!0,row:!0,className:"gap-1 pr-2 md:pr-0",children:[e.jsxs(o,{fontWeight:"medium",variant:"secondary",children:[a("common.balance"),":"," ",h?n.toSignificant(6):d.toSignificant(6)]}),e.jsx(C,{className:"!h-5 !px-1.5",onClick:re,textTransform:"uppercase",variant:"outlineSecondary",children:a("common.max")})]})]})}),e.jsxs(t,{className:"self-stretch flex-1",children:[e.jsx(t,{flex:1,children:e.jsx(ke,{stretch:!0,amountValue:c,className:R("-ml-1 !text-2xl font-normal text-left flex-1"),containerClassName:"!py-0",onAmountChange:l=>_(l,r)})}),e.jsxs(t,{center:!0,className:"gap-3",children:[e.jsx(o,{textStyle:"subtitle2",children:O.ticker}),e.jsx(A,{asset:O,size:34})]})]})]})})]}),e.jsx(P,{className:"!bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl self-stretch !py-3 gap-2 justify-between md:px-6",children:e.jsxs(t,{col:!0,className:"self-stretch flex-1 md:pl-0",children:[e.jsx(t,{className:"gap-3 self-stretch !mb-3",children:e.jsxs(o,{className:"-ml-1",fontWeight:"normal",variant:"secondary",children:[a("views.stakingVThor.receive"),":"]})}),e.jsxs(t,{className:"self-stretch flex-1",children:[e.jsx(t,{flex:1,children:e.jsx(o,{className:"-ml-1 !text-2xl text-left flex-1",fontWeight:"normal",children:y})}),e.jsxs(t,{center:!0,className:"gap-3",children:[e.jsx(o,{textStyle:"subtitle2",children:B.ticker}),e.jsx(A,{asset:B,size:34})]})]})]})}),e.jsx(P,{className:"self-stretch align-center !bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl !py-2.5",children:e.jsxs(t,{alignCenter:!0,className:"flex-1 gap-2",justify:"between",children:[e.jsxs(t,{center:!0,className:"gap-2",children:[e.jsx(C,{className:"!p-1 !h-auto",leftIcon:e.jsx(k,{name:"switch",size:16}),onClick:()=>T(l=>!l),variant:"outlinePrimary"}),e.jsx(o,{fontWeight:"normal",textStyle:"caption",variant:"primary",children:H(j)})]}),e.jsx(W,{content:a("views.wallet.priceRate"),children:e.jsx(k,{className:be,color:"secondary",name:"infoCircle",size:20})})]})}),e.jsx(Ve,{action:r,assetValue:O.add(c),disabledButton:oe,ethAddress:g,handleVthorAction:ne,setIsConnectModalOpen:ae})]}),e.jsx(He,{closeModal:le,handleAction:z,isOpened:S,outputAmount:y,outputAsset:B,stakingAsset:O.add(c)})]})},Ue=Ee;export{Ue as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["G7qcxkrX.js","assets/index-BDcs8OaA.js","assets/index-PWKo4Vxk.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
